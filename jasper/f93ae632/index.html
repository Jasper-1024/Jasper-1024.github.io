<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#222" media="(prefers-color-scheme: light)"><meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 7.3.0"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png"><link rel="mask-icon" href="/images/logo.svg" color="#222"><meta name="google-site-verification" content="M2t8cZr5nIzHmltyt7Utj3nWYxNyNkCzFyigXBHkGUs"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.0.0/css/all.min.css" integrity="sha256-VHqXKFhhMxcpubYf9xiWdCiojEbY9NexQ4jh8AxbvcM=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.31/dist/fancybox/fancybox.css" integrity="sha256-gkQVf8UKZgQ0HyuxL/VnacadJ+D2Kox2TCEBuNQg5+w=" crossorigin="anonymous"><script class="next-config" data-name="main" type="application/json">{"hostname":"jasper1024.com","root":"/","images":"/images","scheme":"Pisces","darkmode":true,"version":"8.27.0","exturl":true,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"codeblock":{"theme":{"light":"vs2015","dark":"vs2015"},"prism":{"light":"prism-vsc-dark-plus","dark":"prism-vsc-dark-plus"},"copy_button":{"enable":true,"style":"mac"},"fold":{"enable":false,"height":500},"language":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":"disqus","storage":true,"lazyload":true,"nav":{"disqus":{"text":"disqus","order":-1},"utterances":{"text":"utterances","order":-2}},"activeClass":"disqus"},"stickytabs":true,"motion":{"enable":true,"async":true,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"i18n":{"placeholder":"æœç´¢...","empty":"æ²¡æœ‰æ‰¾åˆ°ä»»ä½•æœç´¢ç»“æœï¼š${query}","hits_time":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœï¼ˆç”¨æ—¶ ${time} æ¯«ç§’ï¼‰","hits":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœ"},"path":"/search.xml","localsearch":{"enable":true,"top_n_per_article":1,"unescape":false,"preload":false,"trigger":"auto"}}</script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.27.0/source/js/config.min.js" defer></script><meta name="description" content="è·Ÿåˆ·æå®¢æ—¶é—´&lt;å¿«é€Ÿä¸Šæ‰‹Kotlinå¼€å‘&gt;çš„æµæ°´è´¦   èµ„æ–™æ¥æº:  æå®¢æ—¶é—´ https:&#x2F;&#x2F;johnnyshieh.me&#x2F;posts&#x2F;java-generics&#x2F; https:&#x2F;&#x2F;www.kotlincn.net&#x2F;docs&#x2F;reference&#x2F;generics.html https:&#x2F;&#x2F;kaixue.io&#x2F;    æ›´æ–° 123456720.01.20 åˆå§‹åŒ–20.01.23 åˆæ˜¯"><meta property="og:type" content="article"><meta property="og:title" content="kotlin åŸºç¡€é€Ÿæ"><meta property="og:url" content="https://jasper1024.com/jasper/f93ae632/index.html"><meta property="og:site_name" content="é»˜"><meta property="og:description" content="è·Ÿåˆ·æå®¢æ—¶é—´&lt;å¿«é€Ÿä¸Šæ‰‹Kotlinå¼€å‘&gt;çš„æµæ°´è´¦   èµ„æ–™æ¥æº:  æå®¢æ—¶é—´ https:&#x2F;&#x2F;johnnyshieh.me&#x2F;posts&#x2F;java-generics&#x2F; https:&#x2F;&#x2F;www.kotlincn.net&#x2F;docs&#x2F;reference&#x2F;generics.html https:&#x2F;&#x2F;kaixue.io&#x2F;    æ›´æ–° 123456720.01.20 åˆå§‹åŒ–20.01.23 åˆæ˜¯"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2020-01-20T20:10:11.000Z"><meta property="article:modified_time" content="2020-02-14T19:00:00.000Z"><meta property="article:author" content="Jasper"><meta property="article:tag" content="kotlin"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://jasper1024.com/jasper/f93ae632/"><script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://jasper1024.com/jasper/f93ae632/","path":"jasper/f93ae632/","title":"kotlin åŸºç¡€é€Ÿæ"}</script><script class="next-config" data-name="calendar" type="application/json">""</script><title>kotlin åŸºç¡€é€Ÿæ | é»˜</title><script async src="https://www.googletagmanager.com/gtag/js?id=UA-207687331-1"></script><script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"UA-207687331-1","only_pageview":false,"measure_protocol_api_secret":null}</script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.27.0/source/js/third-party/analytics/google-analytics.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous" defer></script><script src="https://cdn.jsdelivr.net/npm/@next-theme/pjax@0.6.0/pjax.min.js" integrity="sha256-vxLn1tSKWD4dqbMRyv940UYw4sXgMtYcK6reefzZrao=" crossorigin="anonymous" defer></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.31/dist/fancybox/fancybox.umd.js" integrity="sha256-a+H7FYzJv6oU2hfsfDGM2Ohw/cR9v+hPfxHCLdmCrE8=" crossorigin="anonymous" defer></script><script src="https://cdn.jsdelivr.net/npm/lozad@1.16.0/dist/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous" defer></script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.27.0/source/js/comments.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.27.0/source/js/utils.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.27.0/source/js/motion.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.27.0/source/js/sidebar.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.27.0/source/js/next-boot.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.27.0/source/js/pjax.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.5.0/dist/search.js" integrity="sha256-xFC6PJ82SL9b3WkGjFavNiA9gm5z6UBxWPiu4CYjptg=" crossorigin="anonymous" defer></script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.27.0/source/js/third-party/search/local-search.min.js" defer></script><script class="next-config" data-name="pdf" type="application/json">{"object_url":{"url":"https://cdn.jsdelivr.net/npm/pdfobject@2.3.1/pdfobject.min.js","integrity":"sha256-jI72I8ZLVflVOisZIOaLvRew3tyvzeu6aZXFm7P7dEo="},"url":"/lib/pdf/web/viewer.html"}</script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.27.0/source/js/third-party/tags/pdf.min.js" defer></script><script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":{"light":"default","dark":"dark"},"js":{"url":"https://cdn.jsdelivr.net/npm/mermaid@11.10.1/dist/mermaid.min.js","integrity":"sha256-BmQmdWDS8X2OTbrwELWK366LV6escyWhHHe0XCTU/Hk="}}</script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.27.0/source/js/third-party/tags/mermaid.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.27.0/source/js/third-party/fancybox.min.js" defer></script><script class="next-config" data-name="leancloud_visitors" type="application/json">{"enable":true,"app_id":"ItayEcWO7OsLFKF2Y8SsAYG1-MdYXbMMI","app_key":"18UBQFmJXXcOQFebLovT36lh","server_url":null,"security":false}</script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.27.0/source/js/third-party/statistics/lean-analytics.min.js" defer></script><script class="next-config" data-name="enableMath" type="application/json">true</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" integrity="sha256-UF1fgpAiu3tPJN/uCqEUHNe7pnr+QR0SQDNfgglgtcM=" crossorigin="anonymous"><script src="https://cdn.jsdelivr.net/npm/quicklink@3.0.1/dist/quicklink.umd.js" integrity="sha256-44BednzIpUeQJcY8qtLyarFu0UCCTbgmWOvaoehiFQQ=" crossorigin="anonymous" defer></script><script class="next-config" data-name="quicklink" type="application/json">{"enable":true,"home":false,"archive":false,"delay":true,"timeout":3000,"priority":true,"url":"https://jasper1024.com/jasper/f93ae632/"}</script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.27.0/source/js/third-party/quicklink.min.js" defer></script><link rel="stylesheet" href="/css/callout_blocks.css"><link rel="stylesheet" type="text/css" href="/css/injector/main.css"><link rel="preload" as="style" href="/css/injector/light.css"><link rel="preload" as="style" href="/css/injector/dark.css"><noscript><link rel="stylesheet" href="/css/noscript.css"></noscript><link rel="alternate" href="/atom.xml" title="é»˜" type="application/rss+xml"></head><body itemscope itemtype="http://schema.org/WebPage" class="use-motion"><div class="headband"></div><main class="main"><div class="column"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ " role="button"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><i class="logo-line"></i><p class="site-title">é»˜</p><i class="logo-line"></i></a><p class="site-subtitle" itemprop="description">ç”Ÿå­˜æ˜¯å”¯ä¸€çš„é•¿è·¯</p></div><div class="site-nav-right"><div class="toggle popup-trigger" aria-label="æœç´¢" role="button"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>åˆ†ç±»<span class="badge">46</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£<span class="badge">326</span></a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>å…³äº</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ ‡ç­¾<span class="badge">62</span></a></li><li class="menu-item menu-item-guestbook"><a href="/guestbook/" rel="section"><i class="fa fa-comments fa-fw"></i>ç•™è¨€</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœç´¢</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocapitalize="off" maxlength="80" placeholder="æœç´¢..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close" role="button"><i class="fa fa-times-circle"></i></span></div><div class="search-result-container"><div class="search-result-icon"><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></header><aside class="sidebar"><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc">æ–‡ç« ç›®å½•</li><li class="sidebar-nav-overview">ç«™ç‚¹æ¦‚è§ˆ</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AF%BC%E8%AF%AD"><span class="nav-number">1.</span> <span class="nav-text">å¯¼è¯­</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC%E4%B8%80%E7%AB%A0-%E5%9F%BA%E7%A1%80"><span class="nav-number">2.</span> <span class="nav-text">ç¬¬ä¸€ç«  åŸºç¡€</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E7%B1%BB%E4%B8%8E%E5%AF%B9%E8%B1%A1"><span class="nav-number">3.</span> <span class="nav-text">ç¬¬äºŒç«  ç±»ä¸å¯¹è±¡</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC%E4%B8%89%E7%AB%A0-%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7"><span class="nav-number">4.</span> <span class="nav-text">ç¬¬ä¸‰ç«  é«˜çº§ç‰¹æ€§</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC%E5%9B%9B%E7%AB%A0-kotlin-%E8%AF%AD%E6%B3%95%E8%83%8C%E5%90%8E"><span class="nav-number">5.</span> <span class="nav-text">ç¬¬å››ç«  kotlin è¯­æ³•èƒŒå</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC%E4%BA%94%E7%AB%A0-kotlin-%E6%89%A9%E5%B1%95%E5%BA%93"><span class="nav-number">6.</span> <span class="nav-text">ç¬¬äº”ç«  kotlin æ‰©å±•åº“</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8D%8F%E7%A8%8B"><span class="nav-number">6.1.</span> <span class="nav-text">åç¨‹</span></a></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="Jasper" src="/images/avatar.jfif"><p class="site-author-name" itemprop="name">Jasper</p><div class="site-description" itemprop="description">å¾®å°˜</div></div><div class="site-state-wrap animated"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">326</span> <span class="site-state-item-name">æ—¥å¿—</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">46</span> <span class="site-state-item-name">åˆ†ç±»</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">62</span> <span class="site-state-item-name">æ ‡ç­¾</span></a></div></nav></div><div class="links-of-author animated"><span class="links-of-author-item"><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2phc3Blci0xMDI0" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;jasper-1024"><i class="fab fa-github fa-fw"></i>GitHub</span> </span><span class="links-of-author-item"><a href="/ljy087621@gmail.com" title="E-Mail â†’ ljy087621@gmail.com" rel="noopener me"><i class="fa fa-envelope fa-fw"></i>E-Mail</a> </span><span class="links-of-author-item"><span class="exturl" data-url="aHR0cHM6Ly94LmNvbS9KYXNwZXJfMTAyNA==" title="Twitter â†’ https:&#x2F;&#x2F;x.com&#x2F;Jasper_1024"><i class="fab fa-twitter fa-fw"></i>Twitter</span> </span><span class="links-of-author-item"><span class="exturl" data-url="aHR0cHM6Ly90Lm1lL2phc3BlcjEwMjQ=" title="Telegram â†’ https:&#x2F;&#x2F;t.me&#x2F;jasper1024"><i class="fab fa-skype fa-fw"></i>Telegram</span> </span><span class="links-of-author-item"><a href="/atom.xml" title="RSS â†’ &#x2F;atom.xml" rel="noopener me"><i class="fas fa-rss fa-fw"></i>RSS</a></span></div></div></div><div class="back-to-top animated" role="button" aria-label="è¿”å›é¡¶éƒ¨"><i class="fa fa-arrow-up"></i> <span>0%</span></div></div><div class="sidebar-inner sidebar-blogroll"><div class="links-of-blogroll animated"><div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i> é“¾æ¥</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmZvcmVjaG8uY29tLw==" title="https:&#x2F;&#x2F;blog.forecho.com&#x2F;">forecho</span></li><li class="links-of-blogroll-item"><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmZvcmVjaG8uY29tL2ZyaWVuZHNoaXAtbGlua3Mv" title="https:&#x2F;&#x2F;blog.forecho.com&#x2F;friendship-links&#x2F;">å‹é“¾èšåˆ</span></li></ul></div></div></aside></div><div class="main-inner post posts-expand"><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://jasper1024.com/jasper/f93ae632/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jfif"><meta itemprop="name" content="Jasper"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="é»˜"><meta itemprop="description" content="å¾®å°˜"></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content="kotlin åŸºç¡€é€Ÿæ | é»˜"><meta itemprop="description" content=""></span><header class="post-header"><h1 class="post-title" itemprop="name headline">kotlin åŸºç¡€é€Ÿæ</h1><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">å‘è¡¨äº</span> <time title="åˆ›å»ºæ—¶é—´ï¼š2020-01-20 20:10:11" itemprop="dateCreated datePublished" datetime="2020-01-20T20:10:11Z">2020-01-20</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">æ›´æ–°äº</span> <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-02-14 19:00:00" itemprop="dateModified" datetime="2020-02-14T19:00:00Z">2020-02-14</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">åˆ†ç±»äº</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" itemprop="url" rel="index"><span itemprop="name">ç¼–ç¨‹è¯­è¨€</span></a> </span>ï¼Œ <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/kotlin/" itemprop="url" rel="index"><span itemprop="name">kotlin</span></a> </span></span><span id="/jasper/f93ae632/" class="post-meta-item leancloud_visitors" data-flag-title="kotlin åŸºç¡€é€Ÿæ" title="é˜…è¯»æ¬¡æ•°"><span class="post-meta-item-icon"><i class="far fa-eye"></i> </span><span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span> <span class="leancloud-visitors-count"></span> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i> </span><span class="post-meta-item-text">Disqusï¼š</span> <a title="disqus" href="/jasper/f93ae632/#disqus_thread" itemprop="discussionUrl"><span class="post-comments-count disqus-comment-count" data-disqus-identifier="jasper/f93ae632/" itemprop="commentCount"></span> </a></span><span class="post-meta-break"></span> <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span> <span>25k</span> </span><span class="post-meta-item" title="é˜…è¯»æ—¶é•¿"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span> <span>23 åˆ†é’Ÿ</span></span></div></div></header><div class="post-body" itemprop="articleBody"><ul><li><p>è·Ÿåˆ·æå®¢æ—¶é—´&lt;å¿«é€Ÿä¸Šæ‰‹Kotlinå¼€å‘&gt;çš„æµæ°´è´¦</p></li><li><p>èµ„æ–™æ¥æº:</p><blockquote><p>æå®¢æ—¶é—´<br><span class="exturl" data-url="aHR0cHM6Ly9qb2hubnlzaGllaC5tZS9wb3N0cy9qYXZhLWdlbmVyaWNzLw==">https://johnnyshieh.me/posts/java-generics/<i class="fa fa-external-link-alt"></i></span><br><span class="exturl" data-url="aHR0cHM6Ly93d3cua290bGluY24ubmV0L2RvY3MvcmVmZXJlbmNlL2dlbmVyaWNzLmh0bWw=">https://www.kotlincn.net/docs/reference/generics.html<i class="fa fa-external-link-alt"></i></span><br><span class="exturl" data-url="aHR0cHM6Ly9rYWl4dWUuaW8v">https://kaixue.io/<i class="fa fa-external-link-alt"></i></span></p></blockquote></li><li><p>æ›´æ–°</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">20.01</span>.<span class="number">20</span> åˆå§‹åŒ–</span><br><span class="line"><span class="number">20.01</span>.<span class="number">23</span> åˆæ˜¯ä¸ªå¤§å‘ğŸ˜¥</span><br><span class="line"><span class="number">20.01</span>.<span class="number">29</span> é›†åˆæ“ä½œç¬¦.</span><br><span class="line"><span class="number">20.01</span>.<span class="number">30</span> ä½œç”¨åŸŸå‡½æ•°/è¿ç®—ç¬¦é‡è½½/ä¸­ç¼€è¡¨è¾¾å¼</span><br><span class="line"><span class="number">20.02</span>.<span class="number">08</span> æ³›å‹...æŠŠ java æ³›å‹ç¿»äº†ä¸€é..</span><br><span class="line"><span class="number">20.02</span>.<span class="number">12</span> åç¨‹,è¿˜æš‚æ—¶åªæ˜¯ä½¿ç”¨.ğŸ¤•.</span><br><span class="line"><span class="number">20.02</span>.<span class="number">14</span> é‡æ–°è¡¥å……åŸºç¡€å†…å®¹</span><br></pre></td></tr></table></figure></li></ul><span id="more"></span><h2 id="å¯¼è¯­"><a class="markdownIt-Anchor" href="#å¯¼è¯­"></a> å¯¼è¯­</h2><ul><li>æ€»å½’è¦è½¬åˆ° kotlin ,è¶è¿™æ®µå°é”çš„æ—¶é—´ç†Ÿæ‚‰ä¸€ä¸‹.</li><li>é…åˆ <span class="exturl" data-url="aHR0cHM6Ly9rb3RsaW5sYW5nLm9yZy9kb2NzL3JlZmVyZW5jZS8=">kotlin doc<i class="fa fa-external-link-alt"></i></span> <span class="exturl" data-url="aHR0cDovL3huLS1xcnF2NjhjdzZqNXk4YS5wcw==">é£Ÿç”¨æ›´ä½³.ps<i class="fa fa-external-link-alt"></i></span>: å®˜ç½‘çš„ä»£ç å¯ä»¥ç›´æ¥ç¼–è¾‘æ‰§è¡Œ.</li><li>(20.01.29)è¯æ•ˆè²Œä¼¼ä¸é”™å•Š.</li><li>(20.02.10)è‡ªå§‹è‡³ç»ˆ kt ç»™æˆ‘æ„Ÿè§‰æ›´ç±»ä¼¼ python è€Œä¸æ˜¯å…¶ä»–çš„ jvm è¯­è¨€.</li><li>(20.02.12)åç¨‹å¿«åäº†,1.3ä»¥å‰çš„apiå˜åŠ¨å¾ˆå¤š,ç†è§£ä¸Šä¹Ÿæœ‰éš¾åº¦.</li><li>(20.02.13)å‰©ä¸‹çš„ io åº“æš‚æ—¶ç”¨ä¸åˆ°, KTX æ˜¯ Jetpack çš„éƒ¨åˆ†.æš‚æ—¶è¡¥å……ä¸€ä¸‹åŸºç¡€å†…å®¹.æ•´ç†ç­‰é åå§.ç ä¸Šå¼€å­¦çš„å…¥é—¨ä¸é”™,å°±æ˜¯æ›´æ–°å¥½æ…¢å•Š,æœ€åæ˜¯19.10æœˆä»½äº†.</li></ul><h2 id="ç¬¬ä¸€ç« -åŸºç¡€"><a class="markdownIt-Anchor" href="#ç¬¬ä¸€ç« -åŸºç¡€"></a> ç¬¬ä¸€ç«  åŸºç¡€</h2><ul><li><p>å˜/å¸¸é‡</p><ul><li>var è¡¨ç¤ºå˜é‡,val è¡¨ç¤ºå¸¸é‡.</li><li>kt çš„å˜é‡æ²¡æœ‰é»˜è®¤å€¼,éœ€è¦æ˜¾å¼å£°æ˜.<ul><li>kotlin ç¼–è¯‘å™¨å¯ä»¥è¯†åˆ«å˜é‡ç±»å‹æ—¶,å¯çœç•¥å˜é‡ç±»å‹.<code>var = &quot;das&quot;</code></li><li>å½“éƒ¨åˆ†å˜é‡æ²¡æ³•åœ¨å£°æ˜æ—¶åˆå§‹åŒ–æ—¶,éœ€è¦ lateinit ä¿®é¥°,å‘Šè¯‰ç¼–è¯‘å™¨ä¸å†å¯¹æ­¤å˜é‡æ£€æŸ¥åˆå§‹åŒ–.</li></ul></li><li>kotlin ä¸ºç©ºç±»å‹å®‰å…¨.ä¾‹å¦‚ String å³ä¸ä¸ºç©º,è€Œ String? å¯ä»¥ä¸ºç©º.ä¸¤è€…æ˜¯ä¸åŒçš„å˜é‡ç±»å‹.<ul><li>String å¯ä»¥ç›´æ¥èµ‹å€¼ç»™ String? ,åä¹‹ä¸èƒ½,å¯ä»¥ä½¿ç”¨å¼ºåˆ¶ name = name2!!.</li><li>å½“è°ƒç”¨ä¸€ä¸ªå¯ç©ºå˜é‡çš„æ–¹æ³•æ—¶éœ€è¦ä½¿ç”¨ <code>?.</code> è€Œä¸æ˜¯ <code>.</code>,è¿™æ · kt ä¼šå¯¹å˜é‡åˆ¤æ–­éç©ºå†è°ƒç”¨.ä¾‹ <code>test?.one()</code></li><li>ä½†æœ‰æ—¶å¿…é¡»è¿”å›ä¸€ä¸ªå€¼,éœ€è¦ <code>?:</code> å…œåº•.<code>val l = str?.length ?: -1</code> str ä¸ºç©º,è¿”å› -1.</li><li>æˆ–è€…ä½¿ç”¨éç©ºæ–­è¨€,<code>test!!.one()</code>,å‘Šè¯‰ç¼–è¯‘å™¨ä¸å†æ£€æŸ¥éç©º.</li></ul></li><li>é»˜è®¤æ˜¯ pubulic .</li></ul></li><li><p>ç±»å‹: æ•°å­—ã€å­—ç¬¦ã€å¸ƒå°”å€¼ã€æ•°ç»„ä¸å­—ç¬¦ä¸²</p><ul><li>æ•°å­—:<ul><li>æ•´æ•°: Byte Short Int Long ,é»˜è®¤æ˜¯ Int ç±»å‹.æ˜¾å¼æŒ‡å®š Long:<code>500L</code></li><li>æµ®ç‚¹æ•°: Float å’Œ Double.kt ä¸­ä¸¤è€…æ²¡æœ‰éšå¼çš„ç±»å‹è½¬æ¢.é»˜è®¤ä¸º Double ç±»å‹.Float éœ€è¦æ˜¾å¼æŒ‡å®š <code>500.12f</code></li><li>è¿›åˆ¶: äºŒè¿›åˆ¶ <code>0b010</code>,åè¿›åˆ¶ <code>102</code>,åå…­è¿›åˆ¶ <code>0x0F</code> .æ²¡æœ‰å…«è¿›åˆ¶.</li><li>ç‰¹ç‚¹:<ul><li>æ•°å­—è¿™é‡Œæœ‰ä¸ªç‰¹æ€§æ˜¯å¯ä»¥åŠ ä¸‹åˆ’çº¿æ›´æ˜“è¯». <code>199999.9899</code> = <code>199_999.989_9</code>,æ— è®ºæ•´æ•°å°æ•°,æ— è®ºè¿›åˆ¶.</li><li>è¡¨ç¤ºèŒƒå›´è¾ƒå°ç±»å‹å¹¶ä¸æ˜¯è¾ƒå¤§ç±»å‹çš„å­ç±»å‹,éœ€è¦å¼ºåˆ¶ç±»å‹è½¬æ¢.</li></ul></li></ul></li><li>å­—ç¬¦:<ul><li>å­—ç¬¦ä¸èƒ½ç›´æ¥å½“ä½œæ•°å­—.(å†™æƒ¯äº† c æœ‰ç‚¹ä¸é€‚åº”).å¦‚ç¡®å®éœ€è¦è°ƒç”¨ toInt æ–¹æ³•.</li><li>ç‰¹æ®Šå­—ç¬¦å¯ä»¥ç”¨åæ–œæ è½¬ä¹‰.</li></ul></li><li>å­—ç¬¦ä¸²<ul><li>String ç±»å‹,ä¸å¯å˜ç±»å‹.</li><li>ä¸¤ç§è¡¨ç¤º: <code>&quot;xx&quot;</code> è½¬ä¹‰å­—ç¬¦ä¸²å¯ä»¥æœ‰è½¬ä¹‰å­—ç¬¦, <code>&quot;&quot;&quot;xx&quot;&quot;&quot;</code> åŸå§‹å­—ç¬¦ä¸²,ä¸­é—´ä¸€èµ·éƒ½æ˜¯å­—ç¬¦ä¸²,ä¸åŒ…æ‹¬è½¬è¯‘,å¯ä»¥æœ‰ç©ºæ ¼æ¢è¡Œç­‰ç­‰.</li><li>å¯ä»¥ä½¿ç”¨ç´¢å¼•è¿ç®—ç¬¦è®¿é—®: s[i],å¯ä»¥ç”¨ for å¾ªç¯è¿­ä»£.</li><li>å¯ä»¥ä½¿ç”¨ + æ“ä½œç¬¦è¿æ¥å­—ç¬¦ä¸².åªè¦ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯å­—ç¬¦ä¸²ä¹Ÿå¯è¿æ¥å…¶ä»–ç±»å‹,è°ƒç”¨å…¶ä»–ç±»å‹çš„ toString æ–¹æ³•.</li><li>åŸå§‹å­—ç¬¦ä¸².trimMargin() å¯ä»¥å»æ‰æ¯ä¸€è¡Œçš„ç©ºæ ¼.</li></ul></li><li>å¸ƒå°”ç±»å‹ä¸ java ç›¸åŒ.</li><li>æ•°ç»„: ä¸ java å·®åˆ«æœ‰ç‚¹å¤§.<ul><li>Kotlin æ•°ç»„ä½¿ç”¨ <code>Array&lt;T&gt;</code> ç±»æ¥è¡¨ç¤º.</li><li>å£°æ˜æ•°ç»„<ul><li><code>arrayOf(1, 2, 3)</code> æˆ–è€… <code>arrayOfNulls(5)</code>å…¨ç©º.</li><li>Array çš„æ„é€ å‡½æ•°. <code>val asc = Array(5) &#123; i -&gt; (i * i).toString() &#125;</code></li></ul></li><li>æ”¯æŒç´¢å¼•, forEach,in,in.</li><li>æœ€é‡è¦çš„ä¸€ç‚¹,kt çš„æ•°ç»„æ˜¯ä¸å¯å˜ç±»å‹,è¿™æ„å‘³ç€ kt çš„æ•°ç»„ä¸æ”¯æŒåå˜.å³ <code>Array&lt;String&gt;</code> å¹¶ä¸æ˜¯ <code>Array&lt;Any&gt;</code> çš„å­ç±».æ— æ³•æŠŠ <code>Array&lt;String&gt;</code> ç›´æ¥èµ‹å€¼ç»™ <code>Array&lt;Any&gt;</code>.(ä½†æ˜¯å¯ä»¥é€šè¿‡ç±»å‹æŠ•å½±åšåˆ°,è§æ³›å‹.<code>Array&lt;out Any&gt;</code>)</li><li>é™¤äº†åŸºæœ¬çš„ <code>Array&lt;T&gt;</code> ç±»,kt è¿˜æä¾›äº†æ— éœ€è£…ç®±çš„ ByteArray,ShortArray,IntArray.ä½†è¿™äº›ç±»ä¸ Array å¹¶æ²¡æœ‰ç»§æ‰¿å…³ç³».</li></ul></li></ul></li><li><p>é›†åˆ</p><ul><li><p>kt ä¸­é›†åˆä¾æ—§æ˜¯: List Set Map 3 ç§.</p></li><li><p>List</p><ul><li>åˆ›å»ºä¸€ä¸ª List æ¯” java ç®€å• ,<code>val strs: List&lt;String&gt; = listOf(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;)</code>.</li><li><strong>æ”¯æŒåå˜</strong>,è¿™å€’æ˜¯ä¸æ•°ç»„ç›¸å.å³å¯ä»¥æŠŠ <code>List&lt;String&gt;</code> ç±»å‹èµ‹å€¼ç»™ <code>List&lt;Any&gt;</code>.</li><li>å…¶ä»–ä¸æ•°ç»„åŸºæœ¬ç›¸åŒ.</li><li>åˆ°åº•ç”¨æ•°ç»„è¿˜æ˜¯ List è§†æƒ…å†µè€Œå®š.æ€§èƒ½éœ€æ±‚è‹›åˆ»,å…ƒç´ ç±»å‹æ˜¯åŸºæœ¬ç±»å‹æ—¶ç”¨æ•°ç»„.</li></ul></li><li><p>Set</p><ul><li>åˆ›å»º Set <code>val strSet = setOf(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;)</code>.</li><li><strong>æ”¯æŒåå˜</strong></li></ul></li><li><p>Map</p><ul><li>åˆ›å»º Map <code>val map = mapOf(&quot;key1&quot; to 1, &quot;key2&quot; to 2, &quot;key3&quot; to 3, &quot;key4&quot; to 3)</code>.</li><li>get æˆ–è€…æ–¹æ‹¬å·é”®å€¼è¯»å–.<code>val value1 = map.get(&quot;key1&quot;) val value2 = map[&quot;key2&quot;]</code>.</li><li>put æˆ–è€…æ–¹æ‹¬å·é”®å€¼ä¿®æ”¹(è¦æ±‚æ˜¯å¯å˜é›†åˆ).<code>map.put(&quot;key1&quot;, 2) map[&quot;key1&quot;] = 2</code>.</li></ul></li><li><p>å¯å˜/ä¸å¯å˜é›†åˆ</p><ul><li>ä¸Šé¢å¯¹ Map çš„ä¿®æ”¹,Map å¿…é¡»è¦ç”± mutableMapOf() åˆ›å»º,é¡»è¦æ˜¯å¯å˜é›†åˆ.</li><li>mutable å‰ç¼€çš„å‡½æ•°åˆ›å»ºçš„æ˜¯å¯å˜çš„é›†åˆ,æ²¡æœ‰ mutbale å‰ç¼€çš„åˆ›å»ºçš„æ˜¯ä¸å¯å˜çš„é›†åˆ.ä¸å¯å˜é›†åˆå¯ä»¥é€šè¿‡ toMutable*() ç³»å‡½æ•°è½¬æ¢æˆå¯å˜çš„é›†åˆ.</li><li>listOf() , mutableListOf(); setOf() , mutableSetOf(); mapOf() , mutableMapOf();</li></ul></li><li><p>é›†åˆç±»è¿˜æœ‰ä¸€ä¸ª Sequence ç±»ä¼¼ Iterable ,ä½†æ˜¯æ˜¯æƒ°æ€§çš„,åªæœ‰è°ƒç”¨å–å€¼æ—¶æ‰è¿ç®—.</p></li></ul></li><li><p>æ¡ä»¶æ§åˆ¶,æ¯” java æ›´ç®€åŒ–.</p><ul><li>if åŸºæœ¬ç”¨æ³•æ²¡å˜,å¯ä»¥ä½œä¸ºè¡¨è¾¾å¼èµ‹å€¼ç»™å˜é‡ <code>val max = if (a &gt; b) a else b</code>.</li><li><strong>æ²¡æœ‰ä¸‰å…ƒè¿ç®—ç¬¦</strong></li><li>switch:default æ›¿æ¢æˆäº† when:else,é…åˆ lambda å¾ˆç®€æ´.<ul><li><p>è¿˜æ”¯æŒå¤šä¸ªæ¡ä»¶æˆ–.</p></li><li><p>in åˆ¤æ–­é›†åˆ,is åˆ¤æ–­ç±»å‹,ç”šè‡³çœç•¥ when åé¢çš„å‚æ•°,æ¯ä¸€ä¸ªéƒ½æ˜¯å¸ƒå°”è¡¨è¾¾å¼.</p></li><li><p>ä¾‹å­</p><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">when</span> (x) &#123;</span><br><span class="line">  <span class="number">1</span> -&gt; &#123; println(<span class="string">&quot;1&quot;</span>) &#125;</span><br><span class="line">  <span class="number">2</span> -&gt; &#123; println(<span class="string">&quot;2&quot;</span>) &#125;</span><br><span class="line">  <span class="number">1</span>, <span class="number">2</span> -&gt; print(<span class="string">&quot;x == 1 or x == 2&quot;</span>)</span><br><span class="line">  <span class="keyword">in</span> <span class="number">1.</span><span class="number">.10</span> -&gt; print(<span class="string">&quot;x åœ¨åŒºé—´ 1..10 ä¸­&quot;</span>)</span><br><span class="line">  <span class="keyword">is</span> String -&gt; print(<span class="string">&quot;true&quot;</span>)</span><br><span class="line">  <span class="keyword">else</span> -&gt; &#123; println(<span class="string">&quot;else&quot;</span>) &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">when</span> &#123;</span><br><span class="line">  str1.contains(<span class="string">&quot;a&quot;</span>) -&gt; print(<span class="string">&quot;å­—ç¬¦ä¸² str1 åŒ…å« a&quot;</span>)</span><br><span class="line">  str2.length == <span class="number">3</span> -&gt; print(<span class="string">&quot;å­—ç¬¦ä¸² str2 çš„é•¿åº¦ä¸º 3&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li></ul></li><li><p>kotlin å‡½æ•°</p><ul><li><p>å‚æ•°(å‡ ä¹ä¸ python ç›¸åŒ)</p><ul><li>å˜é‡:æ ‡è¯†ç±»å‹.: fun test(str:String):String {} è¡¨é¢å…¥å‚ str è¿”å›ä¸€ä¸ª String ç±»å‹</li><li>å‚æ•°å¯ä»¥æœ‰é»˜è®¤å€¼.</li><li><strong>æ¯ä¸€ä¸ªéƒ½æ˜¯å‘½åå‚æ•°</strong>,ä¾‹å¦‚åœ¨å…¶ä»–å‚æ•°éƒ½æœ‰é»˜è®¤å€¼æ—¶,å¯ä»¥é€šè¿‡å‚æ•°å‘½å•ç‹¬ä¼ å…¥è¿™ä¸€ä¸ªå‚æ•°çš„å€¼.</li><li>å‚æ•°å¾ˆå¤šæ—¶å¯ä»¥é€šè¿‡å‚æ•°çš„ä½ç½®ä¼ å…¥å€¼(ä½ç½®å‚æ•°).</li><li>å½“ç„¶ä¼ å…¥å€¼æ—¶,ä½ç½®å‚æ•°è¦åœ¨å‘½åå‚æ•°çš„å‰é¢.</li></ul></li><li><p>æ²¡æœ‰è¿”å›å€¼ java è¿”å› void è€Œ kt è¿”å› Unit</p></li><li><p>é»˜è®¤æ˜¯ public ,ä½† override ä¿®é¥°é™¤å¤–.</p></li><li><p>å‡½æ•°ä½“åªæœ‰1è¡Œæ—¶,å¯ä»¥ç›´æ¥èµ‹å€¼.</p><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">test_1</span><span class="params">(str: <span class="type">String</span> =<span class="string">&quot;test1&quot;</span>)</span></span> = println(<span class="string">&quot;fun <span class="variable">$str</span>&quot;</span>)</span><br></pre></td></tr></table></figure></li><li><p>é¡¶çº§å‡½æ•°: ä¸ java çš„ä¸€åˆ‡çš†å¯¹è±¡ä¸åŒ,kt çš„å‡½æ•°å¯ä»¥ç›´æ¥å†™åœ¨æ–‡ä»¶è€Œä¸ä¾é™„äºå¯¹è±¡.</p><ul><li>è¿™æ ·å£°æ˜çš„å‡½æ•°æ˜¯å…¨å±€çš„.</li><li>é¡¶çº§å‡½æ•°å±äºåŒ….ä¸¤ä¸ªä¸åŒæ–‡ä»¶çš„åŒåé¡¶çº§å‡½æ•°,è°ƒç”¨æ—¶ IDE ä¼šè‡ªåŠ¨åŠ ä¸ŠåŒ…å‰ç¼€.</li></ul></li><li><p>å‡½æ•°åµŒå¥—: kotlinå‡½æ•°å¯ä»¥è¿›è¡ŒåµŒå¥—(ä¸pythonç›¸åŒ).æ•ˆæœä¸ java åŒ¿åå†…éƒ¨ç±»ç›¸ä¼¼. ä½†åªæ¨èéœ€è¦é€’å½’,æˆ–éšè—å†…éƒ¨å‡½æ•°æ—¶ä½¿ç”¨.</p></li><li><p>æ‹“å±•å‡½æ•°: é™æ€çš„å‘ç±»å’Œå¯¹è±¡ä¸­æ·»åŠ å‡½æ•°/å˜é‡ç­‰.ç¬¬ä¸‰æ–¹SDKæˆ–æ— æ³•æ§åˆ¶ç±»çš„å¯¹è±¡æ—¶ä½¿ç”¨.<br>æ‹“å±•å‡½æ•°ç¼–è¯‘åé™æ€æ–¹æ³•,å…¶ä¸­ä¸€ä¸ªå‚æ•°æ˜¯ è¢«æ‹“å±•çš„ç±»çš„å¯¹è±¡.å½“å…¶ä¹‹ç±»è°ƒç”¨æ—¶,å­ç±»ä¼šè¢«å¼ºè½¬ä¸ºçˆ¶ç±».</p><ul><li><p>ä¾‹</p><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*  ç±»å.æ‹“å±•æ–¹æ³•å*/</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> File.<span class="title">readText</span><span class="params">(charset: <span class="type">Charset</span> = Charsets.UTF_8)</span></span>: String = readBytes().toString(charset)</span><br></pre></td></tr></table></figure></li><li><p>javaè°ƒç”¨,å› ä¸ºæ˜¯æ‹“å±•çš„Fileç±»,ç¼–è¯‘åæ‹“å±•çš„å‡½æ•°å®é™…ä¸Šç¼–è¯‘åˆ°äº† FilesKt ç±»,è°ƒç”¨æ—¶éœ€è¦ä¼ å…¥ kt ç±»çš„å¯¹è±¡,å’Œé»˜è®¤çš„å‚æ•°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;.gitignore&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">text</span> <span class="operator">=</span> FilesKt.readText(file, Charsets.UTF_8);</span><br><span class="line">System.out.print(text);</span><br></pre></td></tr></table></figure></li><li><p>æ‹“å±•å‡½æ•°æœ€åè¢«ç¼–è¯‘æˆä¸€ä¸ª public static çš„æ–¹æ³•é™æ€çš„æ·»åŠ æ–¹æ³•,ä¸å…·å¤‡è¿è¡Œæ—¶çš„å¤šæ€.</p><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">open</span> <span class="keyword">class</span> <span class="title class_">Animal</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">dog</span>:<span class="type">Animal</span>()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> Animal.<span class="title">name</span><span class="params">()</span></span> = <span class="string">&quot;animal&quot;</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> dog.<span class="title">name</span><span class="params">()</span></span> = <span class="string">&quot;dog&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> Animal.<span class="title">pr</span><span class="params">(animal: <span class="type">Animal</span>)</span></span> = println(animal.name())</span><br><span class="line"><span class="comment">//è°ƒç”¨æœ€åç»“æœæ˜¯ animal</span></span><br><span class="line">dog().pr(dog())</span><br></pre></td></tr></table></figure></li></ul></li><li><p>Lambda è¡¨è¾¾å¼(æ¯”java8çš„æœ‰é™æ”¯æŒå¥½ç”¨å¤ªå¤šäº†).é»˜è®¤è¢«ç¼–è¯‘ä¸ºä¸€ä¸ªåŒ¿åå†…éƒ¨ç±».</p><ul><li>lambda è¡¨è¾¾å¼æ€»æ˜¯æ‹¬åœ¨å¤§æ‹¬å·ä¸­,å®Œæ•´è¯­æ³•å½¢å¼çš„å‚æ•°å£°æ˜æ”¾åœ¨èŠ±æ‹¬å·å†…,å¹¶æœ‰å¯é€‰çš„ç±»å‹æ ‡æ³¨,å‡½æ•°ä½“è·Ÿåœ¨ä¸€ä¸ª -&gt; ç¬¦å·ä¹‹å.</li><li><code>val sum = &#123; x: Int, y: Int -&gt; x + y &#125;</code></li><li>lambda è¡¨è¾¾å¼æ²¡æœ‰å‚æ•°,å¯ä»¥çœç•¥ -&gt;</li><li>lambda æ˜¯å‡½æ•°æœ€åä¸€ä¸ªå‚æ•°,å¯ä»¥å°†å¤§æ‹¬å·æ”¾åœ¨å°æ‹¬å·åé¢.</li><li>lambda æ˜¯å‡½æ•°å”¯ä¸€çš„å‚æ•°,å¯ä»¥çœç•¥å°æ‹¬å·</li><li>lambda å‚æ•°æ•°é‡ä¸Šé™æ˜¯22ä¸ª,å› ä¸ºåªæœ‰ kotlin æ ‡å‡†åº“æ‰å¯ä»¥ä½¿ç”¨ kotlin çš„åŒ…å,è¶…è¿‡22ä¸ªéœ€è¦åªèƒ½è‡ªè¡Œæ·»åŠ  java ç±»å®ç°.</li></ul></li><li><p>é«˜é˜¶å‡½æ•°: å‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°çš„å‡½æ•°.</p><ul><li><p>kt çš„å‡½æ•°æ²¡æœ‰è¿”å›å€¼æ—¶ä¼šæœ‰ä¸€ä¸ªé»˜è®¤çš„è¿”å›å€¼ Unit ,å½“å‡½æ•°ä½œä¸ºå‚æ•°æ—¶è¦æ˜¾å¼çš„å£°æ˜ Unit.</p></li><li><p>å¼•ç”¨åœ¨ç±»ä¸­çš„æ–¹æ³•: ç±»å::æ–¹æ³•å.</p><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">inline</span> <span class="function"><span class="keyword">fun</span> <span class="title">onlyif</span><span class="params">(isdebug:<span class="type">Boolean</span>,block:()-&gt;<span class="type">Unit</span>)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (isdebug) block()</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">val</span> runnable = Runnable &#123; println(<span class="string">&quot;runnable::run&quot;</span>) &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">val</span> function: () -&gt; <span class="built_in">Unit</span></span><br><span class="line"></span><br><span class="line">function = runnable::run</span><br><span class="line"></span><br><span class="line">onlyif(<span class="literal">true</span>,function)</span><br></pre></td></tr></table></figure></li><li><p>lambda è¡¨è¾¾å¼åœ¨ç¼–è¯‘æ—¶æ˜¯åŒ¿åå†…éƒ¨ç±»,å¤§é‡ä½¿ç”¨ä¼šé€ æˆåˆ›å»ºå¤§é‡ä¸´æ—¶å¯¹è±¡.ä½¿ç”¨ inline å…³é”®å­—å¯ä»¥åœ¨ç¼–è¯‘æ—¶å°±å°†åŒ¿åå†…éƒ¨ç±»æ‹†è§£æˆè¯­å¥è°ƒç”¨.ä½†è¿‡åº¦ä½¿ç”¨ inline ä¼šåŠ å¤§ç¼–è¯‘å™¨çš„è´Ÿæ‹…,åŒæ—¶ä½¿å¾—ä»£ç å—è¿‡é•¿.å› æ­¤ä¸€èˆ¬ä»…åœ¨é«˜é˜¶å‡½æ•°é…åˆ lambda æ—¶ä½¿ç”¨.</p></li></ul></li></ul></li><li><p>kotlinä¸java</p><ul><li><p>kotlin å¯ä»¥ç›´æ¥åœ¨æ–‡ä»¶ä¸­å®šä¹‰ä¸€ä¸ªæ–¹æ³•.ç¼–è¯‘åç”Ÿæˆä¸€ä¸ªé»˜è®¤ä»¥æ–‡ä»¶åä¸ºç±»åçš„ç±».ktæ–‡ä»¶çš„æ–¹æ³•ä¸ºè¯¥ç±»çš„ä¸€ä¸ªå†…éƒ¨é™æ€æ–¹æ³•,java è°ƒç”¨æ—¶é€šè¿‡ æ–‡ä»¶å.æ–¹æ³•å è°ƒç”¨.</p></li><li><p>ä»¥ object åˆ›å»ºä¸€ä¸ªåŒ¿åå†…éƒ¨ç±». kotlinä¸­å¯ä»¥ç›´æ¥ ç±»å.æ–¹æ³• è°ƒç”¨. å¯¹åº”javaä¸­: ç±»å.INSTANCE.æ–¹æ³•. è¿™ä¹Ÿæ˜¯ kotlin ä¸­å£°æ˜å•ä¾‹çš„ä¸€ç§æ–¹æ³•.</p><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">object</span> Test&#123;</span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">hello</span><span class="params">(msg:<span class="type">String</span> = <span class="string">&quot;default&quot;</span>)</span></span>&#123;</span><br><span class="line">        println(msg)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//kt</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    Test.hello(<span class="string">&quot;kotlin&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//java</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">test_java</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> static void main(String[] args) &#123;</span><br><span class="line">      Test.INSTANCE.hello(<span class="string">&quot;java&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>Classåœ¨kotlinä¸javaä¸­æ ¼å¼å¹¶ä¸ç›¸åŒ.kotlinåŠ è½½javaçš„classéœ€è¦å£°æ˜<code>class.java</code> è€Œ kotlinæœ¬èº«çš„ç±»å¹¶ä¸æ˜¯ Class è€Œæ˜¯ KClass .</p><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">testJavaClass(JaveMain::<span class="keyword">class</span>.java)</span><br><span class="line">testJavaClass(KotlinMain::<span class="keyword">class</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">testJavaClass</span><span class="params">(clazz: <span class="type">Class</span>&lt;<span class="type">JaveMain</span>&gt;)</span></span>&#123;</span><br><span class="line">    println(clazz.simpleName)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*kotlin çš„ class ä¸º KClass*/</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">testJavaClass</span><span class="params">(clazz: <span class="type">KClass</span>&lt;<span class="type">KotlinMain</span>&gt;)</span></span>&#123;</span><br><span class="line">    println(clazz.simpleName)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>kotlinä¸javaå…³é”®å­—ä¸Šæœ‰éƒ¨åˆ†å†²çª.æ­¤æ—¶éœ€è¦åŠ åå¼•å·è½¬è¯‘. java ä¸­ in æ˜¯å˜é‡ kotlin ä¸­è°ƒç”¨ <code>println(JaveMain.</code>in<code>)</code></p></li><li><p>kotlinä¸­æ²¡æœ‰å°è£…ç±»,åªæœ‰åŸºæœ¬æ•°æ®ç±»å‹.æ‰€æœ‰ java çš„å°è£…ç±»åœ¨ kotlin ä¸­éƒ½ä¼šè½¬æ¢æˆåŸºæœ¬æ•°æ®ç±»å‹.</p></li><li><p>kotlin ç©ºæŒ‡æ•æ„Ÿ,ä¸java äº’è°ƒæ—¶,ä¸ç¡®å®šjavaçš„è¿”å›å€¼æ˜¯å¦ä¸ºç©ºæ—¶,éœ€è¦ä½¿ç”¨kotlinå¯æ¥æ”¶ç©ºå€¼çš„æ•°æ®ç±»å‹.(String?)</p></li><li><p>kotlin æ²¡æœ‰é™æ€å˜é‡,é™æ€æ–¹æ³•.kotlinä¸­å¯ä»¥é€šè¿‡ @JvmStatic æ³¨è§£ä¿®é¥°æ–¹æ³•,è¿™æ · java ä¸­è°ƒç”¨æ—¶ä¸å†éœ€è¦ INSTANCE å…³é”®å­—.</p></li></ul></li></ul><h2 id="ç¬¬äºŒç« -ç±»ä¸å¯¹è±¡"><a class="markdownIt-Anchor" href="#ç¬¬äºŒç« -ç±»ä¸å¯¹è±¡"></a> ç¬¬äºŒç«  ç±»ä¸å¯¹è±¡</h2><ul><li><p>åŸºæœ¬</p><ul><li>kt ä¸­é»˜è®¤çš„ç±»æ˜¯ public final ,éœ€è¦æ˜¾ç¤ºå£°æ˜ open .</li><li>ç»§æ‰¿çš„çˆ¶ç±»å’Œå®ç°çš„æ¥å£éƒ½åœ¨ : åé¢,ä½†æ˜¯æ²¡æœ‰å…ˆåé¡ºåº.</li></ul></li><li><p>æ„é€ å‡½æ•°</p><ul><li><p>ä¸»æ„é€ å‡½æ•°çš„å‚æ•°å¯ä»¥è·Ÿåœ¨ç±»ååé¢çš„æ‹¬å·ä¸­,å‡½æ•°ä½“åœ¨ç±»å†…éƒ¨ <code>init</code> ä»£ç å—.</p></li><li><p>åœ¨ä¸»æ„é€ å‡½æ•°å£°æ˜çš„å˜é‡åœ¨ç±»ä¸­ä¼šç”Ÿæˆä¸€ä»½æ‹·è´,ç›´æ¥è®¿é—®.</p></li><li><p>kt æ”¯æŒæ¬¡çº§æ„é€ å‡½æ•°,éœ€è¦é€šè¿‡ <code>constructor</code> å£°æ˜,ä¸”æ¯ä¸€ä¸ªæ¬¡çº§æ„é€ å‡½æ•°éƒ½éœ€è¦åŸºå±‚ä¸€ä¸ªä¸»æ„é€ å‡½æ•°.å¯ä»¥æ˜¯è¿™ä¸ªç±»æœ¬èº« (this) æˆ–è€…çˆ¶ç±» (super) çš„æ„é€ å‡½æ•°</p></li><li><p>ä¾‹:</p><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">inter</span> &#123;&#125;</span><br><span class="line"><span class="keyword">open</span> <span class="keyword">class</span> <span class="title class_">baseclass</span>() &#123;&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">testclass</span>(str: String = <span class="string">&quot;test&quot;</span>) : inter, baseclass() &#123;</span><br><span class="line">    <span class="keyword">init</span> &#123;</span><br><span class="line">        println(str)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">constructor</span>(int: <span class="built_in">Int</span> = <span class="number">0</span>) : <span class="keyword">this</span>(<span class="string">&quot;1&quot;</span>) &#123;</span><br><span class="line">        println(int)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>è®¿é—®ä¿®é¥°ç¬¦</p><ul><li>private: ç§æœ‰,æˆå‘˜ä»…è¯¥ç±»å¯ä»¥è®¿é—®</li><li>protected: ä¿æŠ¤,æˆå‘˜è¯¥ç±»å’Œå…¶ä¹‹ç±»å¯ä»¥è®¿é—®</li><li>public: å…¬å¼€,æˆå‘˜éšä¾¿è®¿é—®.</li><li>internal: kt ç‰¹æœ‰,ä¸€ä¸ªæ¨¡å—å†…å¯ä»¥è®¿é—®åˆ°.(ç±»ä¼¼cå¤´æ–‡ä»¶çš„static?)</li></ul></li><li><p>å¼ºåˆ¶ç±»å‹è½¬æ¢</p><ul><li><p>java ä¸­å¯ä»¥é€šè¿‡ instanceof åˆ¤æ–­,ç„¶å <code>(tmp)test.function()</code></p></li><li><p>kt ä¸­ is å…³é”®è¯åˆ¤æ–­åå¯ä»¥ç›´æ¥è°ƒç”¨æ— éœ€å¼ºåˆ¶ç±»å‹è½¬æ¢çš„å£°æ˜.åŒæ—¶å¯ä»¥ä¸ä½¿ç”¨ is åˆ¤æ–­,ç›´æ¥ä½¿ç”¨ as å¼ºè½¬.</p><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (activity <span class="keyword">is</span> NewActivity) &#123;</span><br><span class="line">  <span class="comment">//æ— éœ€å¼ºè½¬</span></span><br><span class="line">  activity.action()</span><br><span class="line">&#125;</span><br><span class="line">(activity <span class="keyword">as</span> NewActivity).action() <span class="comment">//å¼ºè½¬,å¯èƒ½æŠ¥é”™.</span></span><br><span class="line">(activity <span class="keyword">as</span>? NewActivity)?.action()<span class="comment">//å¼ºè½¬æˆåŠŸå†è°ƒç”¨,æ›´å®‰å…¨.</span></span><br></pre></td></tr></table></figure></li></ul></li><li><p>kotlin ä¸­çš„ object .</p><ul><li>Object åœ¨ java ä¸­æ˜¯æ‰€æœ‰ç±»çš„åŸºç±»,ä½†åœ¨ kt ä¸­ object(å°å†™) æ˜¯ä¸ªå…³é”®å­—,ä¸¤è€…æ¯«æ— å…³ç³».</li><li>object çš„æ„æ€å°±æ˜¯å£°æ˜ç±»åŒæ—¶åˆ›å»ºä¸€ä¸ªç±»çš„å¯¹è±¡.æ›¿æ¢ class.</li><li>ä¸Šæ–‡æåˆ°äº† object åœ¨å£°æ˜å•ä¾‹å¯¹è±¡æ—¶éå¸¸å¸¸ç”¨.</li></ul></li><li><p>ä¼´ç”Ÿå¯¹è±¡</p><ul><li><p>é€šè¿‡ <code>companion object&#123;&#125;</code> å¯ä»¥å£°æ˜ä¸€ä¸ªç±»çš„ä¼´ç”Ÿå¯¹è±¡.ç„¶åé€šè¿‡ ç±»å.æ–¹æ³•å ç›´æ¥è°ƒç”¨æ–¹æ³•.ç±»ä¼¼ java ç±»çš„é™æ€æ–¹æ³•.</p></li><li><p>å®é™…ä¸Šåœ¨ç¼–è¯‘åä¼´ç”Ÿå¯¹è±¡è¢«ç¼–è¯‘æˆä¸€ä¸ªåä¸º Companion çš„é™æ€å¯¹è±¡,é™æ€å¯¹è±¡ä¸­åŒ…å«äº†æ–¹æ³•.æ‰€æœ‰åœ¨ java ä¸­è°ƒç”¨ kt ä¼´ç”Ÿå¯¹è±¡çš„æ–¹å¼å°±æ˜¯: ç±»å.Companion.æ–¹æ³•å</p></li><li><p>ä¾‹</p><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç±»çš„å†…éƒ¨</span></span><br><span class="line"><span class="keyword">companion</span> <span class="keyword">object</span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">fun</span> <span class="title">isEmpty</span><span class="params">(str: <span class="type">String</span>)</span></span>: <span class="built_in">Boolean</span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">&quot;&quot;</span> == str</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ktè°ƒç”¨</span></span><br><span class="line">testclass.isEmpty(<span class="string">&quot;test&quot;</span>)</span><br><span class="line"><span class="comment">//javaè°ƒç”¨</span></span><br><span class="line">testclass.Companion.isEmpty(<span class="string">&quot;test&quot;</span>);</span><br></pre></td></tr></table></figure></li><li><p>å•ä¾‹æ¨¡å¼,å¯ä»¥ä½¿ç”¨ä¸Šæ–‡æåˆ°çš„ @JvmStatic æ³¨è§£.æˆ–æ˜¯ä½¿ç”¨æ¨èçš„ä¼´ç”Ÿå¯¹è±¡å®ç°æ–¹å¼.</p><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">single</span> <span class="keyword">private</span> <span class="keyword">constructor</span>()&#123;</span><br><span class="line">    <span class="keyword">companion</span> <span class="keyword">object</span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">fun</span> <span class="title">get</span><span class="params">()</span></span>:single&#123;</span><br><span class="line">            <span class="keyword">return</span> Hodler.instance</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">object</span> Hodler&#123;</span><br><span class="line">        <span class="keyword">var</span> instance = single()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>åŠ¨æ€ä»£ç†</p><ul><li><p>åŠ¨æ€ä»£ç†å«ä¹‰: <span class="exturl" data-url="aHR0cHM6Ly9zZWdtZW50ZmF1bHQuY29tL2EvMTE5MDAwMDAxMTI5MTE3OQ==">Javaä¸‰ç§ä»£ç†æ¨¡å¼ï¼šé™æ€ä»£ç†ã€åŠ¨æ€ä»£ç†å’Œcglibä»£ç†<i class="fa fa-external-link-alt"></i></span></p></li><li><p>kt åŠ¨æ€ä»£ç†è‡ªç„¶æ¯” java è¯­æ³•è¦ç®€å•å¾ˆå¤š. å…³é”®è¯ <code>by</code> .ä¸å†éœ€è¦ InvocationHandler å’Œ Proxy .</p></li><li><p>å€¼å¾—æ³¨æ„çš„æ˜¯ kt çš„åŠ¨æ€ä»£ç†åœ¨ç¼–è¯‘æ—¶å·²ç»ç¼–è¯‘ä¸ºäº†é™æ€èµ„æº,è€Œä¸æ˜¯åƒ java é€šè¿‡åå°„è¿›è¡Œ.kt çš„åŠ¨æ€ä»£ç†è¦æ¯” java å¿«.(è‡³äº java çš„åå°„,æœ‰ä¸€ç¯‡å·²ç»åƒç°çš„è‰ç¨¿,åé¢æ•´ç†æ•´ç†)</p><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Animal</span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">bark</span><span class="params">()</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">dog</span>:<span class="type">Animal</span>&#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">bark</span><span class="params">()</span></span> &#123;</span><br><span class="line">        println(<span class="string">&quot;dog&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">zoo</span>(animal: Animal):Animal <span class="keyword">by</span> animal&#123;</span><br><span class="line"><span class="comment">//    override fun bark() &#123;</span></span><br><span class="line"><span class="comment">//        println(&quot;zoo&quot;)</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    zoo(dog()).bark()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>æ•°æ®ç±»</p><ul><li>java ä¸­æ¶‰åŠç”¨æˆ·çš„ç±»é€šå¸¸æ˜¯æ˜¯ <span class="exturl" data-url="aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3poLXR3L0phdmFCZWFucw==">JavaBeans<i class="fa fa-external-link-alt"></i></span>,åªæœ‰å±æ€§æ²¡æœ‰æ–¹æ³•,æ€»æ˜¯é¿å…ä¸äº†å¤§é‡çš„ setter/getter æœ‰æ—¶è¿˜æœ‰ toString hashCode ç­‰ç­‰.</li><li>kt ä¸­åœ¨åœ¨ class å‰æ·»åŠ  <code>data</code> å…³é”®å­—,å±æ€§ä¼šè‡ªåŠ¨ç”Ÿæˆ<ul><li>componentN() å‡½æ•°( kt çš„è§£æ„,è§ä¸‹ä¸€ç« )</li><li>setter/getter</li><li>equals/hashCode</li><li>toString</li><li>copy (ç‰¹ä¾‹ä¸èƒ½æ˜¾å¼å®ç°)</li></ul></li><li>å¦‚æœæ•°æ®ç±»çš„çˆ¶ç±»ä¸­æœ‰ equals hashCode toString æ˜¾å¼çš„å®ç°,åˆ™åœ¨æ•°æ®ç±»ä¸­ç¼–è¯‘å™¨ä¼šç›´æ¥é‡‡ç”¨çˆ¶ç±»çš„æ–¹æ³•è€Œä¸ä¼šé‡å†™.</li><li>ä¸»æ„é€ å‡½æ•°çš„å‚æ•°å¿…é¡»æ˜¯ val æˆ–è€… var.</li><li>æ•°æ®ç±»æ˜¯ final ç±»å‹,æ— æ³•è¢« open ä¿®é¥°,å› æ­¤å…¶ä»–ç±»æ— æ³•ç»§æ‰¿æ•°æ®ç±».</li></ul></li><li><p>å¯†é—­ç±»</p><ul><li><p>kt ä¸­ä¹Ÿæœ‰æšä¸¾ç±»,ç”¨æ³•ä¸ java å®Œå…¨ä¸€è‡´,ä¸å†èµ˜è¿°.kt çš„å¯†é—­ç±»å¯ä»¥çœ‹ä½œæ˜¯æšä¸¾ç±»çš„å‡çº§ç‰ˆ</p></li><li><p>å…³é”®è¯ <code>sealed</code> å¯ä»¥æœ‰å­ç±»,ä½†æ˜¯å­ç±»å¿…é¡»å†™åœ¨å¯†é—­ç±»å†…éƒ¨,æˆ–è€…åŒä¸€ä¸ªæ–‡ä»¶ä¸­.å­ç±»å¯ä»¥ç»§æ‰¿å¯†é—­ç±».</p></li><li><p>ç”¨å¤„æœ€å¤šçš„æ˜¯é…åˆ when ä½¿ç”¨.</p><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">sealed</span> <span class="keyword">class</span> <span class="title class_">PlayerViewType</span> &#123;</span><br><span class="line">    <span class="keyword">object</span> GERRN : PlayerViewType()</span><br><span class="line">    <span class="keyword">object</span> BLUE : PlayerViewType()</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">VIP</span>(<span class="keyword">var</span> view: String, <span class="keyword">var</span> button: String) : PlayerViewType()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">getPleyerView</span><span class="params">(type: <span class="type">PlayerViewType</span>)</span></span> = <span class="keyword">when</span> (type) &#123;</span><br><span class="line">    PlayerViewType.BLUE -&gt; Blue()</span><br><span class="line">    PlayerViewType.GERRN -&gt; Green()</span><br><span class="line">    <span class="keyword">is</span> PlayerViewType.VIP -&gt; Vip(type.view, type.button)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li></ul><h2 id="ç¬¬ä¸‰ç« -é«˜çº§ç‰¹æ€§"><a class="markdownIt-Anchor" href="#ç¬¬ä¸‰ç« -é«˜çº§ç‰¹æ€§"></a> ç¬¬ä¸‰ç«  é«˜çº§ç‰¹æ€§</h2><ul><li><p>è§£æ„</p><ul><li><p>æ˜¯æŒ‡ kt ä¸­å¯ä»¥æŠŠä¸€ä¸ªå¯¹è±¡è§£æ„æˆå¤šä¸ªå˜é‡,ä¸€æ¬¡æ€§èµ‹å€¼.</p></li><li><p>ç®€å•ç¤ºä¾‹</p><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">person</span>(<span class="keyword">var</span> name:String,<span class="keyword">var</span> id:<span class="built_in">Int</span>)&#123;</span><br><span class="line">    <span class="keyword">operator</span> <span class="function"><span class="keyword">fun</span> <span class="title">component1</span><span class="params">()</span></span> = name</span><br><span class="line">    <span class="keyword">operator</span> <span class="function"><span class="keyword">fun</span> <span class="title">component2</span><span class="params">()</span></span> = id</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="keyword">var</span> a = person(<span class="string">&quot;1&quot;</span>, <span class="number">1</span>)</span><br><span class="line">  <span class="keyword">var</span> (_, id) = a</span><br><span class="line">  println(<span class="string">&quot;<span class="variable">$id</span>&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>è§£æ„å¯ä»¥ä¸€æ¬¡æ€§åˆ›é€ å¤šä¸ªå˜é‡,å¯è§£æ„çš„ç±»ä¸­è¦å£°æ˜ <code>componentN()</code> å‡½æ•°,ä¸”è¦ç”¨ operator å…³é”®å­—æ ‡è®°.è¿™ä¸ªä¾‹å­ä¸­ name å¯¹åº”çš„å°±æ˜¯ component1 ,id å¯¹åº”çš„æ˜¯ component2 .å½“ç„¶è¿˜å¯ä»¥æœ‰ 34â€¦ .</p></li><li><p>data class ä¸­å·²ç»è‡ªåŠ¨ç”Ÿæˆäº† componentN().æ‰€ä»¥ä¸Šé¢çš„ä¾‹å­ä¸­ person çš„å£°æ˜å¯ä»¥ç®€åŒ–æˆ <code>data class person(var name:String,var id:Int)</code> .</p></li><li><p>å¯¹äºä¸æƒ³ä½¿ç”¨çš„å˜é‡å¯ä»¥ä½¿ç”¨ä¸‹åˆ’çº¿ä»£æ›¿,ä¸éœ€è¦ä¸ºå…¶å‘½å.ä¸‹åˆ’çº¿å¯¹åº”çš„ componentN ä¸ä¼šè°ƒç”¨.</p></li><li><p>data class é…åˆè§£æ„å¯ä»¥ä¼˜é›…çš„å®ç°ä»å‡½æ•°è¿”å›å¤šä¸ªå€¼.</p></li><li><p>è§£æ„å¦ä¸€ä¸ªé‡è¦çš„å¼•ç”¨å°±æ˜¯ map çš„éå†(è®©æˆ‘æƒ³èµ·äº† python ä¸­æ–¹ä¾¿çš„éå†)</p><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> map: Map&lt;String, <span class="built_in">Int</span>&gt; = mapOf&lt;String, <span class="built_in">Int</span>&gt;(<span class="string">&quot;a&quot;</span> to <span class="number">1</span>, <span class="string">&quot;b&quot;</span> to <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> ((k,v) <span class="keyword">in</span> map)&#123;</span><br><span class="line">    println(<span class="string">&quot;k:<span class="variable">$k</span>,v:<span class="variable">$v</span>&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>å¾ªç¯</p><ul><li><p>ä¸ java ä¸åŒ kt æ²¡æœ‰æˆ‘ä»¬ç†Ÿæ‚‰çš„ <code>for(i=0;i&lt;10;i++)</code> è¿™æ ·çš„å¾ªç¯è¯­å¥.</p></li><li><p>kt æ›´åŠ ç±»ä¼¼ python ,æŠ½è±¡çš„å±‚æ¬¡æ›´é«˜.è¦å®ç°æˆ‘ä»¬ç†Ÿæ‚‰çš„å¾ªç¯,ä¸‹é¢æ˜¯å‡ ä¸ªå…¸å‹çš„ä¾‹å­.</p></li><li><p><code>for (i in 1..10 step 1)</code> ä¸ <code>for (i in 1 until 10)</code></p><ul><li><code>..</code> æ˜¯ <code>until</code> çš„é‡è½½. ä¸¤è€…å®Œå…¨ç­‰åŒ,ä¸¤è€…æœ€åéƒ½æ˜¯ IntRange å‡½æ•°çš„è°ƒç”¨.</li><li><code>1..10</code> è¡¨ç¤º 1åˆ°10 çš„é—­åŒºé—´,åŒ…æ‹¬10.</li><li><code>step</code> æ­¥é•¿é€‰æ‹©,æ­¥é•¿åªèƒ½ä¸ºæ­£æ•°.</li></ul></li><li><p><code>for (i in 10 downTo 1 step 2)</code></p><ul><li>è¡¨ç¤ºä» 10 åˆ° 1 é—­åŒºé—´.</li><li>æ­¥é•¿å¿…é¡»ä¸ºæ­£å€¼.</li></ul></li><li><p><code>repeat(10)&#123;repeat(10)&#123; print(&quot;$it&quot;) &#125;</code></p><ul><li><code>repeat()</code> æ˜¯é«˜é˜¶å‡½æ•°.</li><li>å®é™…ä¸Šåœ¨ä¼ å…¥çš„é—­åŒ…é‡å¤æ‰§è¡Œ 10 æ¬¡</li><li>æ‰§è¡Œçš„åºå·å¯ä»¥é€šè¿‡ it è®¿é—®.</li></ul></li><li><p>for å¾ªç¯è¿˜æœ‰ä¸€ä¸ªç”¨é€”æ˜¯å¯¹è±¡çš„éå†.</p><ul><li><code>for(i in list)</code> æœ€ç®€å•çš„å†™æ³•.</li><li>å¦‚æœè¦å¸¦ä¸Šç´¢å¼•,éœ€è¦è§£æ„çš„å†™æ³•ä½¿ç”¨ <code>list.withIndex</code> <code>for ((index,i) in list.withIndex())</code></li></ul></li></ul></li><li><p>é›†åˆæ“ä½œç¬¦</p><ul><li><p>å¯¹é›†åˆè¿›è¡Œé“¾å¼æ“ä½œ.æœ‰ç”¨è¿‡ rxjava çš„å¤§æ¦‚èƒ½ç†è§£é“¾å¼æ“ä½œçš„ä¾¿åˆ©.kt ä¸­é›†åˆæ“ä½œç¬¦é…åˆ lambda è¡¨è¾¾å¼,æ¯” rxjava æ›´ç®€æ´.</p></li><li><p>é›†åˆæ“ä½œç¬¦æœ‰å‡ ä¸ªåˆ†ç±»,è¿™é‡Œä¹Ÿæ²¡æœ‰åˆ—ä¸¾å…¨,å…·ä½“å‚è€ƒ <span class="exturl" data-url="aHR0cHM6Ly93d3cua290bGluY24ubmV0L2RvY3MvcmVmZXJlbmNlL2NvbGxlY3Rpb24tb3BlcmF0aW9ucy5odG1s">é›†åˆæ“ä½œæ¦‚è¿°<i class="fa fa-external-link-alt"></i></span></p></li><li><p>é›†åˆè½¬æ¢,ä»ç°æœ‰é›†åˆä¸­åˆ›å»ºæ–°çš„é›†åˆ</p><ul><li>map{}: lambda å°†ä½œç”¨äºåŸé›†åˆçš„æ¯ä¸€ä¸ªå…ƒç´ .å¸¸ç”¨äºåŸé›†åˆçš„ç±»å‹è½¬æ¢.</li><li>mapIndexed{ idx, value -&gt; xx }: å¦‚æœ lambda ä¸­åŒæ—¶éœ€è¦ç´¢å¼•.</li><li>mapNotNull{} / mapIndexedNotNull{} : å¦‚æœéœ€è¦è¿‡æ»¤æ‰ç©ºå…ƒç´ .</li><li>zip{a, b -&gt; xxx}: åŒè·¯åˆå¹¶.</li><li>unzip(): æ‹†è§£åŒè·¯,å¯ä¸è§£æ„è¿ç”¨.</li><li>flatten(): æ‹†è§£é›†åˆä¸­çš„åµŒå¥—è¿”å›å•ä¸€çš„é›†åˆ.</li><li>flatMap(): æ‹†è§£å¹¶è¿”å›ä¸€ä¸ªlist?</li><li>joinToString(): æ‹¼æ¥é›†åˆå†…çš„å­—ç¬¦,è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸².å¯ä»¥åœ¨ lambda ä¸­é€šè¿‡ it å…³é”®è¯å¯¹é›†åˆå…ƒç´ å¤„ç†.<ul><li>è‡ªå®šä¹‰å‚æ•° (separator = &quot; | &quot;, prefix = &quot;start: &quot;, postfix = â€œ: endâ€,limit = 10, truncated = â€œ&lt;â€¦&gt;â€)<ul><li>separator æ˜¯æ¯ä¸ªé›†åˆå…ƒç´ çš„é—´éš”,prefix å­—ç¬¦ä¸²å¼€å¤´,postfix å­—ç¬¦ä¸²ç»“å°¾.</li><li>limit é™åˆ¶è¾“å‡ºçš„å­—ç¬¦ä¸²é•¿åº¦,truncated æˆªæ–­åé™„åŠ çš„å­—ç¬¦ä¸²</li></ul></li></ul></li><li>joinTo(str): å‡­å€Ÿé›†åˆå­—ç¬¦åˆ° str,è‡ªå®šä¹‰å‚æ•°åŒä¸Š.</li></ul></li><li><p>é›†åˆè¿‡æ»¤,æŒ‰ç…§ lambda ä¸­è¡¨è¾¾å¼çš„ true/false å†³å®šé›†åˆå…ƒç´ çš„å–èˆ.</p><ul><li>filter{}: lambda ä¸­ä¸º true å…ƒç´ ç•™, false èˆ.ä¸æ”¹å˜åŸé›†åˆçš„ç±»å‹.</li><li>filterIndexed{index,s -&gt; xx}: å¦‚æœéœ€è¦ç”¨åˆ°ç´¢å¼•.</li><li>filterNot{}: ä¸ filter å®Œå…¨ç›¸å.</li><li>filterIsInstance(): æ²¡å¤ªçœ‹æ‡‚.</li><li>filterNotNull(): è¿”å›æ‰€æœ‰éç©º.</li><li>partition{}: åˆ’åˆ†(ç¿»è¯‘æˆåˆ†ç»„æ›´å¥½ä¸€ç‚¹å§).å°†åŸæœ‰é›†åˆåˆ†æˆ lambade è¿”å› true å’Œ false çš„ä¸¤éƒ¨åˆ†.å¯ä»¥é€šè¿‡è§£æ„å–å¾—è¿™ä¸¤ä¸ªå­é›†åˆ.</li><li>any{}: å¦‚æœæœ‰å…ƒç´ çš„ lambda ä¸º true,åˆ™è¿”å› true.</li><li>none{}: å¦‚æœæ‰€æœ‰å…ƒç´ çš„ lambda éƒ½ä¸º false,è¿”å› true.å¦‚æœ lambda ä¸ºç©º,åˆ™åŸé›†åˆæœ‰å…ƒç´ è¿”å› false,æ²¡æœ‰å…ƒç´ è¿”å› true.</li><li>all{}: å¦‚æœæ‰€æœ‰å…ƒç´ çš„ lambda éƒ½ä¸º true,åˆ™è¿”å› true.<strong>æ³¨æ„</strong> å¦‚æœåŸé›†åˆä¸ºç©º all å§‹ç»ˆè¿”å› true.å¦‚æœ lambda ä¸ºç©º,åˆ™åŸé›†åˆæœ‰å…ƒç´ è¿”å› true,æ²¡æœ‰å…ƒç´ è¿”å› false.</li></ul></li><li><p><code>+</code> / <code>-</code> æ“ä½œç¬¦.è¿™ä¸¤ä¸ªæ¯”è¾ƒç‰¹æ®Š.ç›´æ¥å¯¹åº”çš„é›†åˆçš„ + / -,ä¸å†èµ˜è¿°.</p></li><li><p>åˆ†ç»„æ“ä½œç¬¦: å¯ä»¥æŒ‰ç…§ lambda çš„è¿”å›å¯¹åŸé›†åˆ <strong>å…ƒç´ </strong> è¿›è¡Œåˆ†ç»„.(ç›¸å½“äºåµŒå¥—?)</p><ul><li>groupBy{}: æœ€åŸºç¡€çš„åˆ†ç»„æ“ä½œç¬¦.æŒ‰ç…§ lambda çš„è¿”å›å€¼è¿›è¡Œåˆ†ç»„.è¿˜æœ‰æ‹“å±•çš„æ¡ä»¶<ul><li>groupBy(keySelector = { it.first() }, valueTransform = { it.toUpperCase() })</li><li>keySelector: æŒ‡å®šåˆ†ç»„çš„é”®å€¼.</li><li>valueTransform: å¯¹å…ƒç´ è¿›è¡Œå¤„ç†.</li></ul></li><li>å¯¹æ¯ä¸ªåˆ†ç»„è¿›è¡Œæ“ä½œ<ul><li>eachCount(): è®¡ç®—æ¯ä¸ªåˆ†ç»„çš„æ•°é‡</li><li>reduce() / fold() / aggregate() æš‚æ—¶æ²¡ææ‡‚â€¦</li></ul></li></ul></li><li><p>å–å­é›†æ“ä½œç¬¦.é¡¾åæ€ä¹‰ä¸å¯¹å…ƒç´ è¿‡æ»¤,æŒ‰ç…§ <strong>ç´¢å¼•</strong> å–æŒ‡å®šçš„å­é›†.(ç´¢å¼•ä» 0 å¼€å§‹)</p><ul><li>slice(1â€¦2): é€‰å–é›†åˆ [1 2] å¯¹åº”ä½ç½®çš„å­é›†.è¿™é‡Œå–å­é›†çš„è§„åˆ™ä¸å¾ªç¯é‚£é‡Œç±»ä¼¼.<ul><li>(1â€¦3): [1,3] é—­åŒºé—´</li><li>(0â€¦4 step 2): [0,4] é—­åŒºé—´,æ­¥é•¿ä¸º 2 .å®é™…ä¸Šæ˜¯ 0 2 4.</li><li>(setOf(3, 5, 0)): ç›´æ¥æŒ‡å®šç´¢å¼•.</li></ul></li><li>take(): ä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹è¿ç»­é€‰å–å‡ ä¸ªå…ƒç´ .</li><li>takeWhile{}: ä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹,å¦‚æœ lambda ä¸º true ä¿ç•™,å¦åˆ™ä¸¢å¼ƒ.ç›´åˆ°ç¬¬ä¸€ä¸ª lambda ä¸º false ç»ˆæ­¢.</li><li>takeLast(): ä»æœ€åä¸€ä¸ªå…ƒç´ å¼€å§‹,å€’ç€é€‰å–å‡ ä¸ªå…ƒç´ .</li><li>takeLastWhile{}: ä»æœ€åä¸€ä¸ªå…ƒç´ å¼€å§‹,å€’åº å¦‚æœ lambda ä¸º true ä¿ç•™,å¦åˆ™ä¸¢å¼ƒ.ç›´åˆ°ç¬¬ä¸€ä¸ª lambda ä¸º false ç»ˆæ­¢.</li><li>drop(): ä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹,ä¸¢å¼ƒå‡ ä¸ªå…ƒç´ ,å¹¶è¿”å›å‰©ä¸‹çš„é›†åˆ.</li><li>dropWhile{}: ä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹, lambda è¿”å› true ä¸¢å¼ƒ,ç›´åˆ°ç¬¬ä¸€ä¸ª lambda è¿”å› false ç»ˆæ­¢,è¿”å›å‰©ä½™é›†åˆ.</li><li>dropLast(): ä»æœ€åä¸€ä¸ªå…ƒç´ å¼€å§‹,å€’ç€ä¸¢å¼ƒå‡ ä¸ªå…ƒç´ ,å¹¶è¿”å›å‰©ä¸‹çš„é›†åˆ.</li><li>dropLastWhile{}: ä»æœ€åä¸€ä¸ªå…ƒç´ å¼€å§‹,å€’åº lambda è¿”å›ä¸º true ä¸¢å¼ƒ,ç›´åˆ°ç¬¬ä¸€ä¸ª lambda è¿”å› false ç»ˆæ­¢,è¿”å›å‰©ä½™é›†åˆ.</li><li>chunked(3){}: æŒ‰ç…§ç´¢å¼•æ­¥é•¿ä¸º 3,å¯¹é›†åˆè¿›è¡Œåˆ’åˆ†.åé¢å¯ä»¥è·Ÿ lambda è¡¨ç¤ºå¯¹ä¸€ä¸ªç»„å†…çš„å…ƒç´ æ‰§è¡Œçš„æ“ä½œ.</li><li>windowed(3): æŒ‰ç…§æ»‘åŠ¨çª—å£å–ç´¢å¼•è¿›è¡Œåˆ†ç»„.é»˜è®¤æƒ…å†µä¸‹,çª—å£å¤§å° 3 ,ä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹,å–çª—å£ç±»çš„3ä¸ªå…ƒç´ .ç„¶åå‘ä¸‹æ»‘åŠ¨ 1 ,å†å–ä¸‹ä¸€ä¸ªçª—å£.å¯ä»¥è‡ªå®šä¹‰å‚æ•°.<ul><li>windowed(3, step = 2, partialWindows = true): çª—å£å¤§å°ä¸º 3,æ¯æ¬¡çš„æ­¥é•¿ä¸º 2.partialWindows æ˜¯æ˜¯å¦è¾“å‡º æœ€åå°äºæ­¥é•¿çš„å…ƒç´ åˆ†ç»„.</li></ul></li></ul></li><li><p>å–å•ä¸ªå…ƒç´ :æ ¹æ®ç´¢å¼•å–å•ä¸ªå…ƒç´ .ç´¢å¼•ä» 0 å¼€å§‹.</p><ul><li>elementAt(3): å–ç¬¬ 4 ä¸ªå…ƒç´ .(ä» 0 å¼€å§‹),è¶…å‡ºç´¢å¼•æŠ¥é”™.</li><li>elementAtOrNull(5): è¶…å‡ºç´¢å¼•è¿”å› null.</li><li>elementAtOrElse(5){}: è¶…å‡ºç´¢å¼•è¿”å› lambda çš„è¿”å›å€¼.</li><li>first(): è¿”å›ç¬¬ä¸€ä¸ªå…ƒç´ ,ç´¢å¼•0.</li><li>first{}: è¿”å›ç¬¬ä¸€ä¸ª lambda ä¸º true çš„å…ƒç´ .</li><li>find{} = firstOrNull{} : åŒä¸Š,ä½†æ²¡æœ‰ç¬¦åˆå…ƒç´ æ—¶è¿”å› null .</li><li>last(): è¿”å›æœ€åä¸€ä¸ªå…ƒç´ </li><li>last{}: ä»æœ€åä¸€ä¸ªå…ƒç´ å¼€å§‹,å€’åº,è¿”å›ç¬¬ä¸€ä¸ª lambda ä¸º true çš„å…ƒç´ .</li><li>findLast{} = lastOrNull{}: åŒä¸Š,ä½†æ²¡æœ‰ç¬¦åˆå…ƒç´ æ—¶è¿”å› null .</li><li>random(): éšä¾¿å–ä¸€ä¸ªå…ƒç´ ğŸ˜‚.</li><li>contains(a): a æ˜¯å¦åœ¨é›†åˆä¸­,å­˜åœ¨åˆ™è¿”å› true.ä¸å­˜åœ¨åˆ™è¿”å› false. è¿˜æœ‰æ›´ç®€å•è°ƒç”¨ xx in é›†åˆ.</li><li>containsAll(listOf(â€œaâ€, â€œbâ€)): ä¸€æ¬¡æ£€æŸ¥å¤šä¸ªå…ƒç´ .</li><li>isEmpty() / isNotEmpty() : ä¸è§£é‡Š.</li></ul></li><li><p>é›†åˆæ’åº: ä¾ç…§è§„åˆ™å¯¹é›†åˆå…ƒç´ æ’åº.</p><ul><li>sorted(): é»˜è®¤è°ƒç”¨æ¯”è¾ƒçš„å¯¹è±¡å®ç° compareTo æ–¹æ³•.ç”¨æˆ·è‡ªå®šä¹‰ç±»éœ€è¦ç»§æ‰¿ Comparable æ¥å£,å®ç° compareTo æ–¹æ³•.</li><li>reversed(): é»˜è®¤è°ƒç”¨æ¯”è¾ƒçš„å¯¹è±¡å®ç° compareTo æ–¹æ³•,é€†åºæ’åº.è¿”å›ä¸€ä¸ªåŒ…å«ç»“æœçš„æ–°é›†åˆ,ä¸å½±å“åŸé›†åˆ.</li><li>asReversed(): æ•ˆæœåŒä¸Š,ä½†åŸé›†åˆæ˜¯ä¸å¯å˜å¯¹è±¡æ—¶,å¯èƒ½è·Ÿå¿«æ›´è½»å·§.</li><li>sortedWith(): è‡ªå®šä¹‰ä¸€ä¸ªæ¯”è¾ƒå™¨,æ¯æ¬¡æ¯”è¾ƒå³è°ƒç”¨è‡ªå®šä¹‰çš„ Comparator .æ¯”è¾ƒå™¨è¿˜å¯ä»¥ç®€å•çš„ä½¿ç”¨ compareBy å’Œ lambda ç”Ÿæˆ. <code>compareBy &#123; it.length &#125;</code></li><li>sortedBy{}: å¯¹äºä¸å¯æ¯”è¾ƒçš„å¯¹è±¡,æˆ–è€…å¸Œæœ›è‡ªå®šä¹‰é¡ºåºæ’åº.ä¾ç…§ lambda çš„ç»“æœé¡ºåºæ’åº(å®é™…ä¸Šä¸ sortedWith() å·®åˆ«ä¸å¤§)</li><li>sortedByDescending{}: å¯¹äºä¸å¯æ¯”è¾ƒçš„å¯¹è±¡,æˆ–è€…å¸Œæœ›è‡ªå®šä¹‰é¡ºåºæ’åº.ä¾ç…§ lambda çš„ç»“æœé€†åºæ’åº</li><li>shuffled(): éšæœºæ’åº.</li></ul></li><li><p>èšåˆæ“ä½œç¬¦: å¤§æ¦‚æ˜¯å¤„ç†å…¨éƒ¨çš„å…ƒç´ ,è¾“å‡ºç»“æœ.</p><ul><li>min() / max(): æœ€å€¼</li><li>average(): å¹³å‡å€¼</li><li>count(): å…ƒç´ ä¸ªæ•°.</li><li>maxBy{} / minBy{}: æ ¹æ® lambda çš„ç»“æœè¿”å›æœ€å¤§,æœ€å°å€¼.</li><li>maxWith() / minWith(): å¯¹äºä¸å¯æ¯”è¾ƒå¯¹è±¡å’Œæƒ³è‡ªå®šä¹‰æ’åºçš„,åŠ è½½ä¸€ä¸ªæ¯”è¾ƒå™¨.å¯ä»¥ç”¨ compareBy å’Œ lambda ç”Ÿæˆ.</li><li>sum(): æ€»å’Œ</li><li>sumBy{}: lambda ç»“æœæ±‚å’Œ,å…ƒç´ å¿…é¡»ä¸º Int.</li><li>sumByDouble{}: lambda ç»“æœæ±‚å’Œ,å…ƒç´ å¿…é¡»ä¸º Double.</li><li>fold(2){sum, element -&gt; xx}: sum å’Œ element çš„ lambad ç»“æœä¸æ–­ä»£å…¥ä¸‹ä¸€å±‚å¾ªç¯çš„ç¬¬ä¸€ä¸ªå‚æ•° sum.é»˜è®¤ç¬¬ä¸€è½®æ˜¯ sum = 2.</li><li>reduce { sum, element -&gt; xx}: sum å’Œ element çš„ lambad ç»“æœä¸æ–­ä»£å…¥ä¸‹ä¸€å±‚å¾ªç¯çš„ç¬¬ä¸€ä¸ªå‚æ•° sum,é»˜è®¤ sum æ˜¯é›†åˆç´¢å¼•ä¸º 0 çš„å…ƒç´ .</li><li>reduceRight() / foldRight(): åŒä¸Š,ä½†æ˜¯é¡ºåºä»æœ€åä¸€ä¸ªå…ƒç´ å¼€å§‹é€†åº.</li><li>reduceIndexed{idx, sum, element -&gt; xx} / foldIndexed(2){idx, sum, element -&gt; xx}: å¸¦ç´¢å¼•.</li><li>reduceRightIndexed{idx, sum, element -&gt; xx} / foldRightIndexed(2){idx, sum, element -&gt; xx}: åŒä¸Š,ä½†æ˜¯ä»æœ€åä¸€ä¸ªå…ƒç´ å¼€å§‹é€†åº.</li></ul></li></ul></li><li><p>ä½œç”¨åŸŸå‡½æ•°</p><ul><li>ä¸åŒäºé›†åˆæ“ä½œç¬¦åªèƒ½ä½œç”¨äºé›†åˆå¯¹è±¡,ä½œç”¨åŸŸå‡½æ•°å¯ä»¥ä½œç”¨äºä»»æ„å¯¹è±¡.</li><li>ä½œç”¨åŸŸå‡½æ•°åªæ˜¯åœ¨å¯¹è±¡çš„ä¸Šä¸‹æ–‡æ‰§è¡Œ lambda é—­åŒ…,æ²¡æœ‰å¼•å…¥æ–°çš„åŠŸèƒ½.åªæ˜¯é€šè¿‡ä½œç”¨åŸŸå‡½æ•°ä»£ç ä¸å¿…å†æ–°å‘½åå˜é‡,æ›´åŠ è®²è§£æ˜“è¯».(è¶Šç®€æ´,å‡ºé”™å¯èƒ½æ€§è¶Šå°‘)</li><li>run{}: è¿”å› lambda æ‰§è¡Œçš„ç»“æœ.æ²¡æœ‰é—­åŒ…å‚æ•°,ä½¿ç”¨ this ä»£æŒ‡è°ƒç”¨å¯¹è±¡.</li><li>let{}: è¿”å› lambda æ‰§è¡Œçš„ç»“æœ.æœ‰é—­åŒ…å‚æ•°.å¯æ˜¾å¼å£°æ˜ <code>str:String -&gt; xx</code>,ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>it</code> ä»£æŒ‡.</li><li>apply{} ä¸è¿”å› lambda æ‰§è¡Œç»“æœ,è¿”å›è°ƒç”¨å¯¹è±¡,å¯é“¾å¼è°ƒç”¨.æ²¡æœ‰é—­åŒ…å‚æ•°,ä½¿ç”¨ this ä»£æŒ‡è°ƒç”¨å¯¹è±¡.</li><li>also{}: ä¸è¿”å› lambda æ‰§è¡Œç»“æœ,è¿”å›è°ƒç”¨å¯¹è±¡,å¯é“¾å¼è°ƒç”¨.æœ‰é—­åŒ…å‚æ•°.å¯æ˜¾å¼å£°æ˜ <code>str:String -&gt; xx</code>,ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>it</code> ä»£æŒ‡.</li><li>takeIf{}: è¿”å›åˆ¤æ–­çš„ç»“æœ,lambda ä¸º true è¿”å›æ­¤å¯¹è±¡,å¦åˆ™è¿”å› null.</li><li>takeUnless{}: è¿”å›åˆ¤æ–­çš„ç»“æœ,lambda ä¸º fasle è¿”å›æ­¤å¯¹è±¡,å¦åˆ™è¿”å› null.</li><li>with(s){}: ä¸ä¸Šé¢çš„ä¸åŒ,with æ˜¯é¡¶çº§å‡½æ•°è€Œä¸æ˜¯æ‹“å±•å‡½æ•°.å¯¹ s è¿›è¡Œä¸€ç³»åˆ—æ“ä½œ.</li><li>repeat: åŒå¾ªç¯.</li></ul></li><li><p>è¿ç®—ç¬¦é‡è½½</p><ul><li>æˆ‘ä»¬å¯ä»¥å¯¹ kt çš„è¿ç®—ç¬¦é‡è½½,æ–¹ä¾¿ä»£ç çš„ç¼–å†™.ä¸”é‡è½½è¿ç®—ç¬¦ä¸ä¼šå¼•å…¥å‡½æ•°è°ƒç”¨çš„å¼€é”€.</li><li>kt ä¸­è¿ç®—ç¬¦æ€»æ•°æœ‰ä¸Šé™,ä¸€ä¸ªè¿ç®—ç¬¦å®é™…å¯¹åº”ä¸€ä¸ªå‡½æ•°è°ƒç”¨,å¯¹åº”å…³ç³»åœ¨ç¼–è¯‘æ—¶å·²ç»å®Œæˆ.</li><li>ä»¥ <code>a + b</code> ä¸ºä¾‹,ç¼–è¯‘å™¨é‡åˆ° <code>+</code> é¦–å…ˆæŸ¥æ‰¾ a çš„ç±»å‹ T,åœ¨ T ä¸­æŸ¥æ‰¾å‡½æ•°åä¸º plus() å‚æ•°ä¸º T ç±»å‹çš„å‡½æ•°.ä¸”è¦æ±‚ plus() è¢« <code>operator</code> ä¿®é¥°.å°†è¿ç®—ç¬¦å˜æˆå¯¹åº”å‡½æ•°çš„è°ƒç”¨.</li><li>ä¸€å…ƒè¿ç®—ç¬¦<ul><li>+a | a.unaryPlus()</li><li>-a | a.unaryMinus()</li><li>!a | a.not()</li><li>a++ | a.inc() +</li><li>a-- | a.dec() +</li></ul></li><li>äºŒå…ƒè¿ç®—ç¬¦<ul><li>a + b | a.plus(b)</li><li>a - b | a.minus(b)</li><li>a * b | a.times(b)</li><li>a / b | a.div(b)</li><li>a % b | a.rem(b)</li><li>aâ€¦b | a.rangeTo(b)</li><li>a in b | b.contains(a)</li><li>a !in b | !b.contains(a)</li></ul></li><li>ç´¢å¼•<ul><li>a[i] | a.get(i)</li><li>a[i, j] | a.get(i, j)</li><li>a[i_1, â€¦â€¦, i_n] | a.get(i_1, â€¦â€¦, i_n)</li><li>a[i] = b | a.set(i, b)</li><li>a[i, j] = b | a.set(i, j, b)</li><li>a[i_1, â€¦â€¦, i_n] = b | a.set(i_1, â€¦â€¦, i_n, b)</li></ul></li><li>è°ƒç”¨<ul><li>a() | a.invoke()</li><li>a(i) | a.invoke(i)</li><li>a(i, j) | a.invoke(i, j)</li><li>a(i_1, â€¦â€¦, i_n) | a.invoke(i_1, â€¦â€¦, i_n)</li></ul></li><li>å¹¿ä¹‰èµ‹å€¼<ul><li>a += b | a.plusAssign(b)</li><li>a -= b | a.minusAssign(b)</li><li>a *= b | a.timesAssign(b)</li><li>a /= b | a.divAssign(b)</li></ul></li><li>å…¶ä»–<ul><li>a == b | a?.equals(b) ?: (b === null)</li><li>a != b | !(a?.equals(b) ?: (b === null))</li><li>a &gt; b | a.compareTo(b) &gt; 0</li><li>a &lt; b | a.compareTo(b) &lt; 0</li><li>a &gt;= b | a.compareTo(b) &gt;= 0</li><li>a &lt;= b | a.compareTo(b) &lt;= 0</li></ul></li></ul></li><li><p>ä¸­ç¼€è¡¨è¾¾å¼</p><ul><li>è¿ç®—ç¬¦çš„æ•°é‡çš„ä¸è¶³,å¯ä»¥é€šè¿‡å®šä¹‰ä¸­ç¼€è¡¨è¾¾å¼ç¼“è§£.</li><li>ä¾‹: <code>infix fun Int.io(string: String)&#123;&#125;</code><ul><li>ä¸­ç¼€çš„å‡½æ•°å¿…é¡»ç”± infix ä¿®é¥°.</li><li><code>.</code> å‰é¢æ˜¯å‡½æ•°æ¥æ”¶è€…çš„ç±».åªæœ‰æ­¤ç±»å‹çš„å¯¹è±¡æ‰å¯ä»¥è°ƒç”¨ä¸­ç¼€è¡¨è¾¾å¼.(åé¢å‚æ•°æ²¡æœ‰ç±»å‹é™åˆ¶)</li><li>å¿…é¡»åªæœ‰ä¸€ä¸ªå‚æ•°,ä¸”å‚æ•°ä¸å¾—æ¥å—å¯å˜æ•°é‡çš„å‚æ•°ä¸èƒ½æœ‰é»˜è®¤å€¼.</li><li>å¯ä»¥ä½¿ç”¨ this å¼•ç”¨å‡½æ•°æ¥æ”¶è€…çš„æ–¹æ³•.</li></ul></li><li>è°ƒç”¨ <code>4 io &quot;123&quot;</code> å½“ç„¶ä¹Ÿå¯ä»¥ç›´æ¥é€šè¿‡å‡½æ•°è°ƒç”¨ <code>4.io(&quot;123&quot;)</code>.</li><li>è¦æ³¨æ„çš„æ˜¯ä¸­ç¼€è¡¨è¾¾å¼çš„ä¼˜å…ˆçº§é«˜äºå¸ƒå°”æ“ä½œç¬¦.ä½äºç®—æœ¯æ“ä½œç¬¦.</li></ul></li><li><p>åå¼•å·</p><ul><li>è§£å†³å…³é”®å­—å†²çª</li><li>å¼ºåˆ¶ä¸åˆæ³•å­—ç¬¦å˜ä¸ºåˆæ³•å­—ç¬¦.</li><li>ä¾‹å¦‚å‡½æ•°åå£°æ˜ä¸º <code>fun `123`</code>,è°ƒç”¨æ—¶ä¹Ÿæ˜¯ <code>`123`()</code> ä½†æ˜¯è¿™ä¸ªå‡½æ•° <strong>åœ¨ java ä¸­æ— æ³•è°ƒç”¨</strong> .æ— è®ºæ˜¯ <code>`123`()</code> è¿˜æ˜¯ <code>123()</code> éƒ½æ— æ³•è°ƒç”¨.</li><li>è¿˜æ˜¯æ…ç”¨.é™¤éä½ ç¡®å®šä¸æƒ³è®© java è°ƒç”¨è¿™ä¸ªæ–¹æ³•.</li></ul></li><li><p>å¯¹è±¡çš„æ¯”è¾ƒ</p><ul><li>è¿™ä¸ªåœ¨åˆæ¬¡æ¥è§¦ kt æ—¶,è¢« <code>==</code> å’Œ <code>===</code> å‘äº†ä¸€æŠŠâ€¦</li><li>java ä¸­å¼•ç”¨çš„æ¯”è¾ƒæ˜¯ <code>a == b</code>,å€¼çš„æ¯”è¾ƒæ˜¯ <code>a.equals(b)</code>,è€Œåœ¨ kt ä¸­å€¼çš„æ¯”è¾ƒæ˜¯ <code>a == b</code>,å¼•ç”¨çš„æ¯”è¾ƒæ˜¯ <code>a === b</code>. <code>==</code> åœ¨ kt å’Œ java ä¸­ä½œç”¨æ­£å¥½ç›¸å.</li></ul></li><li><p>ç±»å‹åˆ«å</p><ul><li>ç»™å½“å‰çš„ç±»å‹èµ·ä¸ªåˆ«å,å¯ä»¥æ˜¯æ–¹æ³•,ç±»,æ³›å‹ç­‰ç­‰.</li><li><code>typealias xx = xx</code> ,ä¸ä¼šå¼•å…¥æ–°ç±»å‹,åœ¨ç¼–è¯‘æ—¶å·²ç»å¤„ç†,ä¸ä¼šå½±å“è¿è¡Œé€Ÿåº¦.</li><li>kt ä¸­éå¸¸å¤šçš„é›†åˆç±»æ–¹æ³•éƒ½æ˜¯é€šè¿‡ typealias æ¥çš„.</li></ul></li><li><p>DSL(æš‚æ—¶è·³è¿‡)</p></li><li><p>æ³›å‹: ä½¿ç”¨æ³›å‹çš„åˆè¡·,å¤§æ¦‚å¸Œæœ›æŠŠä¸æ•°æ®ç»“æ„æ— å…³çš„é€»è¾‘æŠ½è±¡å‡ºæ¥,æ³›å‹æ˜¯ä¸€ä¸ªæ•°æ®ç±»å‹çš„æ ‡è®°. (æ˜æ˜å†™çš„æ˜¯ kt çš„æ³›å‹,java å†™äº†ä¸€å †â€¦ğŸ˜¤â€¦)</p><ul><li><p>java æ³›å‹åŸºæœ¬ä½¿ç”¨</p><ul><li><code>&lt;T&gt;</code> åŸºæœ¬å½¢å¼,å•ç‹¬ä½¿ç”¨ T ç›¸å½“äº Object.</li><li><code>&lt;T extends Number &amp; Interface1&gt;</code> é™åˆ¶ T åªèƒ½ä¸º Number æˆ–è€… Number çš„å­ç±»,å¹¶ä¸”å¿…é¡»å®ç° Interface1.</li><li><code>&lt;?&gt;</code> é€šé…ç¬¦,ç›´æ¥ä½¿ç”¨ä»£è¡¨ object .</li><li><code>&lt;? extends SuperType&gt;</code> ä¸Šç•Œé€šé…ç¬¦,é™å®šä¼ å…¥çš„å¯¹è±¡å¿…é¡»æ˜¯ SuperType æˆ–å…¶å­ç±».SuperType å¯ä»¥æ˜¯ç±»æˆ–è€…æ¥å£.</li><li><code>&lt;? super SubType&gt;</code> ä¸‹ç•Œé€šé…ç¬¦,é™å®šä¼ å…¥å¿…é¡»æ˜¯ SubType æˆ–å…¶çˆ¶ç±».SuperType å¯ä»¥æ˜¯ç±»æˆ–è€…æ¥å£.</li><li>PECS åŸåˆ™: Producer Extends Consumer Super,ç®€è€Œè¨€ä¹‹,åªè¯» extends åªå†™ super</li><li>å¯ä»¥æœ‰æ³›å‹ç±»,æ„é€ å‡½æ•°ä¹Ÿå¯ä»¥æ˜¯æ³›å‹,æ¥å£å¯ä»¥æ˜¯æ³›å‹,é™æ€æˆå‘˜ä¸èƒ½æœ‰æ³›å‹,ä½†å¯ä»¥å£°æ˜é™æ€æ³›å‹æ–¹æ³•.</li></ul></li><li><p>java ç±»å‹æ“¦é™¤: java å¯¹æ³›å‹çš„æ”¯æŒå¹¶ä¸åŒ…æ‹¬è¿è¡Œæ—¶æ”¯æŒ,æ‰€æœ‰æ³›å‹å‚æ•°åœ¨ç¼–è¯‘åéƒ½ä¼šè¢«æ“¦é™¤.</p><ul><li><code>&lt;T&gt;</code> å½“ä½œ object,è¿™æ ·å¯¼è‡´äº†ä¸€äº› java æ³›å‹çš„é™åˆ¶.<ul><li>åŸºæœ¬ç±»å‹ä¸èƒ½è½¬æ¢æˆ object,æ‰€ä»¥æ³›å‹ä¸èƒ½æ˜¯åŸºæœ¬ç±»å‹.</li><li>æ— è®ºæ˜¯ <code>Pair&lt;String&gt;</code> è¿˜æ˜¯ <code>Pair&lt;Integer&gt;</code> è¿è¡Œæ—¶ <code>getClass()</code> å¾—åˆ°çš„å§‹ç»ˆæ˜¯åŒä¸€ä¸ª <code>Pair.class</code>.å› ä¸ºåœ¨ç¼–è¯‘æ—¶ä¸¤è€…éƒ½è½¬æ¢æˆäº† <code>Pair&lt;Object&gt;</code>.</li><li>ä¸èƒ½å®ä¾‹åŒ– T ç±»å‹,è¦å®ä¾‹åŒ– T å¯ä»¥ä½¿ç”¨ <code>Class&lt;T&gt;</code> é€šè¿‡åå°„æ¥,ä½¿ç”¨æ—¶å€™ä¼ å…¥å…·ä½“çš„ xx.class.</li></ul></li><li><code>&lt;T extends Number&gt;</code> T ä¼šæ›¿æ¢æˆ Number ç±»å‹.å…·ä½“ä½¿ç”¨æ—¶æ¯”å¦‚æˆ‘ä»¬ä¼ å…¥äº† Integer ç±»å‹,ç¼–è¯‘å™¨è¿˜ä¼šåŠ ä¸Šå¼ºåˆ¶ç±»å‹è½¬æ¢ <code>(Integer) xxx</code>.</li></ul></li><li><p>java æ³›å‹é™åˆ¶</p><ul><li>ä¸èƒ½æ˜¯åŸºæœ¬ç±»å‹</li><li>ä¸èƒ½å®ä¾‹åŒ– T ,ä½†å¯ä»¥é€šè¿‡åå°„ <code>Class&lt;T&gt;</code> ç®€ä»‹å®ç°.</li><li>å¯ä»¥å£°æ˜æ³›å‹æ•°ç»„,ä½†ä¸èƒ½ç›´æ¥åˆ›å»ºæ³›å‹æ•°ç»„,å¿…é¡»å¼ºåˆ¶è½¬å‹.</li><li>é™æ€æˆå‘˜ä¸èƒ½æœ‰æ³›å‹.</li><li>ä¸èƒ½ç»§æ‰¿æˆ–é—´æ¥ç»§æ‰¿ Throwable ç±».</li><li>é‡è½½æ–¹æ³•æ—¶,ä¸èƒ½é‡è½½ç¼–è¯‘åå‚æ•°ç±»å‹ä¸ºç›¸åŒåŸå§‹çš„æ–¹æ³•</li></ul></li><li><p>kt æ³›å‹: kt ç¼–è¯‘åä¹Ÿæ˜¯ jvm å­—èŠ‚ç ,è¿™æ„å‘³ç€ kt çš„æ³›å‹ä¹Ÿä¸æ˜¯ç±»ä¼¼ c# çš„è¿è¡Œæ—¶çš„çœŸæ³›å‹.ä½†æ˜¯ kt ç›¸å¯¹ java å¯¹æ³›å‹çš„æ”¯æŒè¿˜æ˜¯æ¿€è¿›äº†å¾ˆå¤š.</p></li><li><p>kt æ³›å‹åŸºæœ¬ä½¿ç”¨,ä¸ java æ²¡å•¥å¤ªå¤§åŒºåˆ«</p><ul><li><code>class Box&lt;T&gt; &#123;&#125;</code></li><li><code>fun &lt;K, V&gt; compare(p1: Pair&lt;K, V&gt;, p2: Pair&lt;K, V&gt;)&#123;&#125;</code></li><li><code>compare(Pair(1, &quot;1&quot;), Pair(2, &quot;2&quot;))</code> ç±»å‹å¯ä»¥æ¨æ–­,å¯ä»¥çœç•¥ <code>&lt;String,Inter&gt;</code></li></ul></li><li><p>æ³›å‹çº¦æŸ</p><ul><li><p><code>&lt;T&gt;</code> é»˜è®¤ä»£è¡¨ <code>Any?</code> ç±»å‹,å¯ç©º.å¦‚æœç¡®è®¤æ³›å‹ä¸ä¸ºç©º,åº”è¯¥ä½¿ç”¨ <code>&lt;T: Any&gt;.</code></p></li><li><p>ä¸ java ä¸åŒ,kt çš„ <code>&lt;&gt;</code> åªèƒ½å£°æ˜ä¸€ä¸ªä¸Šç•Œ.å¤šä¸ªä¸Šç•Œéœ€è¦ where.</p><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="type">&lt;T&gt;</span> <span class="title">test</span><span class="params">(list: <span class="type">List</span>&lt;<span class="type">T</span>&gt;)</span></span></span><br><span class="line">  <span class="keyword">where</span> T : Comparable&lt;T&gt;,</span><br><span class="line">        T : CharSequence &#123;&#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>å‹å˜: å¯¹å‚æ•°ç±»å‹è¿›è¡Œå­ç±»å‹è½¬æ¢.</p><ul><li>ä¾‹å¦‚ <code>List&lt;Integer&gt;</code> ä¸ <code>List&lt;Number&gt;</code> ä¸¤è€…åœ¨ä»£ç ä¸­ä¾æ—§æ˜¯ä¸åŒçš„ç±»,æ²¡æœ‰ç»§æ‰¿çš„å…³ç³».ä½†æ˜¯åœ¨ java ä¸­é€šè¿‡é€šé…ç¬¦å¯ä»¥åœ¨ä¸¤è€…ä¹‹é—´å»ºç«‹ç»§æ‰¿å…³ç³».<ul><li>åå˜: <code>List&lt;? extends Number&gt;</code> å¯ä»¥ä¼ å…¥ <code>List&lt;Integer&gt;</code>.è¿™æ · <code>List&lt;Integer&gt;</code> æ˜¯ <code>List&lt;? extends Number&gt;</code> çš„å­ç±». Integer æ˜¯ Number çš„å­ç±».é¡ºåºçš„è½¬æ¢.</li><li>é€†å˜: <code>List&lt;? super Integer&gt;</code> å¯ä»¥ä¼ å…¥ <code>List&lt;Number&gt;</code>.è¿™æ · <code>List&lt;Number&gt;</code> æ˜¯ <code>List&lt;? super Integer&gt;</code> çš„å­ç±»,ä½†æ˜¯ Number å´æ˜¯ Integer çš„çˆ¶ç±».è¿™æ ·çš„è½¬æ¢ç§°ä¸ºé€†å˜.</li></ul></li><li>å‹å˜æœ‰ä¸¤ç§<ul><li>ä½¿ç”¨æ—¶å‹å˜(ç±»å‹æŠ•å½±): æ³›å‹ç”¨åœ¨å‚æ•° å±æ€§ å±€éƒ¨å˜é‡æˆ–è¿”å›å€¼.åœ¨ java å°±æ˜¯ extend/super.åœ¨ kt ä¸­å¯¹åº” in/out .ä¸¤è€…ä½¿ç”¨åŸåˆ™ä¸€è‡´,ä¸åŠ èµ˜è¿°.</li><li>å£°æ˜æ—¶å‹å˜: æ³›å‹ç±»å‹å’Œæ³›å‹å‡½æ•°.java ä¸å…è®¸è¿™æ ·ä½¿ç”¨.kt å¯ä»¥.</li></ul></li><li>ä¾‹<ul><li>out: ä¿®é¥°åä¼ å…¥å¯¹è±¡ä¸º T æˆ– T çš„å­ç±»(åå˜).ç±»ä¼¼ extend ä¼ å…¥å¯¹è±¡åªè¯».T é€šå¸¸ç”¨åœ¨æˆå‘˜å‡½æ•°çš„è¾“å‡ºç±»å‹,è€Œä¸ç”¨åœ¨è¾“å…¥. <code>interface Test&lt;out T&gt; &#123;fun nextT(): T&#125;</code></li><li>in: ä¿®é¥°åä¼ å…¥å¯¹è±¡ä¸º T æˆ– T çš„çˆ¶ç±»(é€†å˜).ç±»ä¼¼ super ä¼ å…¥å¯¹è±¡ åªå†™.T é€šå¸¸ç”¨åœ¨æˆå‘˜å‡½æ•°çš„è¾“å…¥ç±»å‹,è€Œä¸ç”¨åœ¨è¾“å‡º.<br><code>interface Test&lt;in T&gt; &#123;fun compareTo(other: T)&#125;</code></li></ul></li></ul></li><li><p>æ˜ŸæŠ•å½±: ä½¿ç”¨æ³›å‹æ—¶å€™å¦‚æœå‚æ•°ç±»å‹æœªçŸ¥,ä½¿ç”¨æ—¶ç”¨ <code>*</code> ä»£æ›¿å‚æ•°ç±»å‹.java ä¸­å¯ä»¥ä½¿ç”¨åŸå§‹ç±»å‹(Raw Type) ä½†æ˜¯æ€»å½’å­˜åœ¨éšæ‚£.æ˜ŸæŠ•å½±æ¯” java çš„åŸå§‹ç±»å‹æ›´åŠ å®‰å…¨.</p><ul><li><p>ä½¿ç”¨ java çš„åŸå§‹ç±»å‹,ç¼–è¯‘å™¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ArrayList&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(<span class="number">5</span>);</span><br><span class="line"><span class="type">ArrayList</span> <span class="variable">unkownList</span> <span class="operator">=</span> list; <span class="comment">//åŸå§‹ç±»å‹</span></span><br><span class="line">unkownList.add(<span class="number">1</span>);  <span class="comment">//é”™è¯¯,ä½†ç¼–è¯‘å™¨æç¤ºä¸èƒ½æ£€æŸ¥æ­¤æ®µä»£ç </span></span><br></pre></td></tr></table></figure></li><li><p>æ˜ŸæŠ•å½±å¯ä»¥æ ¹æ®åŸæ³›å‹çš„å£°æ˜,ç¼–è¯‘æ—¶æ£€æŸ¥ä»£ç ,æç¤ºé”™è¯¯.</p><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> list: ArrayList&lt;String&gt; = ArrayList(<span class="number">5</span>)</span><br><span class="line"><span class="keyword">val</span> unkownList: ArrayList&lt;*&gt; = list <span class="comment">//æ˜ŸæŠ•å½±</span></span><br><span class="line">unkownList.add(<span class="number">1</span>) <span class="comment">//ç¼–è¯‘å™¨æç¤ºé”™è¯¯.</span></span><br></pre></td></tr></table></figure></li><li><p><code>Foo &lt;out T : TUpper&gt;</code>: T å…·æœ‰ä¸Šç•Œ TUpper çš„åå˜ç±»å‹å‚æ•°.<code>Foo &lt;*&gt;</code> ç­‰ä»·äº <code>Foo &lt;out TUpper&gt;</code>. å½“ T æœªçŸ¥æ—¶,å¯ä»¥å®‰å…¨åœ°ä» <code>Foo &lt;*&gt;</code> è¯»å– TUpper çš„å€¼.</p></li><li><p><code>Foo &lt;in T&gt;</code>: T æ˜¯é€†å˜ç±»å‹å‚æ•°,<code>Foo &lt;*&gt;</code> ç­‰ä»·äº <code>Foo &lt;in Nothing&gt;</code>. T æœªçŸ¥æ—¶,æ— æ³•å®‰å…¨å†™å…¥ <code>Foo &lt;*&gt;</code>.</p></li><li><p><code>Foo &lt;T : TUpper&gt;</code>: T å…·æœ‰ä¸Šç•Œ TUpper çš„ä¸å‹å˜ç±»å‹å‚æ•°.<code>Foo&lt;*&gt;</code> è¯»å–æ—¶ç­‰ä»·äº <code>Foo&lt;out TUpper&gt;</code>, å†™å…¥æ—¶ç­‰ä»·äº <code>Foo&lt;in Nothing&gt;</code>.</p></li><li><p>å¯¹æœ‰å¤šä¸ªæ³›å‹å‚æ•°çš„æ–¹æ³•æˆ–ç±»,æ¯ä¸ªå‚æ•°çš„æ˜ŸæŠ•å½±ç‹¬ç«‹ç”Ÿæ•ˆ,äº’ä¸å½±å“.</p></li></ul></li><li><p>&quot;çœŸ&quot;æ³›å‹: å› ä¸ºç±»å‹æ“¦é™¤, java ä¸­æ— æ³•åœ¨è¿è¡Œæ—¶è·å–æ³›å‹ T çš„class.ä½†æ˜¯ kt ä¸­å¯ä»¥å†…è”å‡½æ•° + reified ä¿®é¥°æ³›å‹,å˜é€šçš„å®ç°.è¦åŠ å¼•å·.</p><ul><li><p>ä¾‹</p><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">inline</span> <span class="function"><span class="keyword">fun</span> <span class="type">&lt;<span class="keyword">reified</span> T&gt;</span> <span class="title">Check</span><span class="params">()</span></span>:&#123;println(T:)&#125;</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123; Check&lt;String&gt;() &#125;</span><br><span class="line"><span class="comment">//è¾“å‡º class java.lang.String</span></span><br></pre></td></tr></table></figure></li><li><p>(æ­¤å¤„å¯èƒ½æ˜¯é”™çš„)ç¼–è¯‘å™¨ä¼šå°†è¯¥æ–¹æ³•å†…è”åˆ°è°ƒç”¨çš„åœ°æ–¹,è·Ÿç›´æ¥æ²¡æœ‰æ³›å‹æ–¹æ³•è¿™ä¸€å±‚æ˜¯ä¸€æ ·çš„.è¿™æ ·å®é™…ä¸Šç¼–è¯‘æ—¶å€™å°± T çš„å…·ä½“ç±»å‹å·²ç»çŸ¥é“äº†.</p></li><li><p>è¦æ³¨æ„çš„æ˜¯ reified çš„å†…è”å‡½æ•°ä¸èƒ½è¢« Java è°ƒç”¨.</p></li></ul></li></ul></li></ul><h2 id="ç¬¬å››ç« -kotlin-è¯­æ³•èƒŒå"><a class="markdownIt-Anchor" href="#ç¬¬å››ç« -kotlin-è¯­æ³•èƒŒå"></a> ç¬¬å››ç«  kotlin è¯­æ³•èƒŒå</h2><ul><li><p>val ä¸ var åŒºåˆ«</p><ul><li>var æœ‰ set å’Œ get .val åªæœ‰ get .</li><li>val ä¿®é¥°çš„å˜é‡æ˜¯æ— æ³•èµ‹å€¼,ä½†æ˜¯å¯ä»¥é€šè¿‡é‡å†™ get æ–¹æ³•ä½¿å¾—è¿”å›å€¼å‘ç”Ÿå˜åŒ–.</li></ul></li><li><p>çœŸ*å¸¸é‡</p><ul><li>val å‰é¢ä½¿ç”¨ const ä¿®é¥°.åœ¨ç¼–è¯‘æ—¶å˜é‡çš„å€¼å·²ç»ç¡®å®šæ— æ³•ä¿®æ”¹,è¿™æ˜¯å¸¸è§„æ„ä¹‰ä¸Šçš„å¸¸é‡.</li><li>const åªèƒ½ä¿®é¥°åœ¨ object ç±»å‹çš„å±æ€§,æˆ–è€…æ˜¯ top-leve ç±»å‹.</li><li>å…·ä½“æ˜¯åŒ¿åå†…éƒ¨ç±»æˆ–è€…ä¼´ç”Ÿå¯¹è±¡.top-leve å°±æ˜¯å˜é‡ç›´æ¥å®šä¹‰åœ¨æ–‡ä»¶è€Œä¸æ˜¯ç±»ä¸­.</li></ul></li><li><p>ç©ºå®‰å…¨: kt è¿™ä¸€ç‚¹æ·±å¾—æˆ‘å¿ƒ,å·¥ä½œæ¥è§¦ c æœ€è§¦å¤´çš„å°±æ˜¯ç©ºæŒ‡é’ˆ.</p><ul><li>é¿å…ç©ºæŒ‡é’ˆæ— éåªæœ‰ä¸¤è€…é€”å¾„.kt ä¸­ä¸¤è€…å…¼æœ‰.<ul><li>è¿è¡Œæ—¶å¤„ç†,æ¯æ¬¡ä½¿ç”¨å¼•ç”¨å¯¹è±¡æ—¶è¿›è¡Œåˆ¤ç©º.</li><li>ç¼–è¯‘æ—¶å¤„ç†,ä¸èƒ½ä¸ºç©ºçš„ç±»å‹ä¸ºç©ºç›´æ¥ç¼–è¯‘æŠ¥é”™.</li></ul></li></ul></li><li><p>å†…è”å‡½æ•° ä¸ lambda</p><ul><li><p>åœ¨é«˜é˜¶å‡½æ•°ä¸­æåˆ°äº†ä¸€ä¸ªå…³é”®è¯ <code>inline</code> å¯ä»¥å°† lambda ç›´æ¥è½¬åŒ–ä¸ºå¯¹åº”è¯­å¥.ç›¸å½“äºæŠŠ lambda åŒ¿åå†…éƒ¨ç±»è¿™ä¸€å±‚å»æ‰äº†.</p></li><li><p>è¿™é‡Œå°±æœ‰ä¸€ä¸ªé—®é¢˜,å¦‚æœåœ¨é«˜é˜¶å‡½æ•°çš„ lambda ä¸­æœ‰ return ä¼šæ€æ ·?</p></li><li><p><code>inline</code> æŠŠ lambda è¿™ä¸€å±‚å»æ‰äº†,é‚£ä¹ˆ return ç›¸å½“äºç›´æ¥å†™åœ¨äº†è°ƒç”¨è¿™ä¸ªé«˜é˜¶å‡½æ•°çš„ä¸Šå±‚å‡½æ•°ä¸­.ä¸Šå±‚å‡½æ•°ç›´æ¥ä¸­æ–­è¿”å›äº†.</p></li><li><p>å®é™…ä¸Šä¸€èˆ¬çš„ lambda ä¸­ä¸å…è®¸å‡ºç° return è¯­å¥,åªèƒ½è¿”å›è‡ªèº« <code>test1 &#123;return@test1&#125;</code>.åªæœ‰ inline ä¿®é¥°çš„å†…è”å‡½æ•°çš„ lambda æ‰å…è®¸ä½¿ç”¨ return .</p><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    test1 &#123;</span><br><span class="line">        println(<span class="string">&quot;test1&quot;</span>)</span><br><span class="line">        <span class="comment">//ä¸å…è®¸é”™è¯¯</span></span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    println(<span class="string">&quot;test2&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">inline</span> <span class="function"><span class="keyword">fun</span> <span class="title">test1</span><span class="params">(<span class="keyword">crossinline</span> t1: () -&gt; <span class="type">Unit</span>)</span></span> &#123;</span><br><span class="line">    t1.invoke()</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>å¯¹äºéœ€è¦ä¸­æ–­ lambda è‡ªèº«,ä½†æ˜¯å¹¶ä¸å¸Œæœ›ä¸­æ–­ä¸Šçº§å‡½æ•°çš„,å¯ä»¥é€šè¿‡ crossinline ä¿®é¥° lambda.è¿™æ · lambda çš„è°ƒç”¨ä¾æ—§ä¼šè¢«å†…è”,ä½†æ˜¯ lambda æœ¬èº«ä¸å†æ‰§è¡Œå†…è”,lambda å†…éƒ¨è¿”å›ä¸æ²¡æœ‰ inline ä¿®é¥°æ—¶ç›¸åŒ.</p><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">inline</span> <span class="function"><span class="keyword">fun</span> <span class="title">test1</span><span class="params">(<span class="keyword">crossinline</span> t1: () -&gt; <span class="type">Unit</span>)</span></span> &#123;&#125;</span><br></pre></td></tr></table></figure></li><li><p>å½“é«˜é˜¶å‡½æ•°çš„è¿”å›å€¼æ˜¯ä¸€ä¸ª lambda æ—¶,å¿…é¡»ä½¿ç”¨ noinline ä¿®é¥°,æ‹’ç»å†…è”,å¦åˆ™ä¼šå‡ºé”™.</p><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">inline</span> <span class="function"><span class="keyword">fun</span> <span class="title">test1</span><span class="params">(<span class="keyword">noinline</span> t1: () -&gt; <span class="type">Unit</span>)</span></span>: () -&gt; <span class="built_in">Unit</span> &#123; <span class="keyword">return</span> t1 &#125;</span><br></pre></td></tr></table></figure></li></ul></li></ul><h2 id="ç¬¬äº”ç« -kotlin-æ‰©å±•åº“"><a class="markdownIt-Anchor" href="#ç¬¬äº”ç« -kotlin-æ‰©å±•åº“"></a> ç¬¬äº”ç«  kotlin æ‰©å±•åº“</h2><h3 id="åç¨‹"><a class="markdownIt-Anchor" href="#åç¨‹"></a> åç¨‹</h3><ul><li><p>åç¨‹è¿˜æ²¡æœ‰ç»Ÿä¸€çš„å®šä¹‰.kt çš„åç¨‹ä¹Ÿæœ‰ä¸€å †ç¥ä»™åœ¨æ‰“æ¶,æš‚æ—¶ä¸“æ³¨åœ¨ç”¨æ³•ä¸Š.åº•å±‚æœ‰æœºä¼šç¿»å®Œæºç å†æ’•.kt çš„åç¨‹åœ¨ 1.3 ç‰ˆæœ¬æ­£å¼åŠ å…¥,1.3 ä»¥å‰çš„ä¸€äº› api å·²ç»ä¸å†é€‚ç”¨.</p></li><li><p>æš‚æ—¶çš„çœ‹æ³•æ˜¯: kt-jvm çš„åç¨‹å½“ä½œè½»é‡çº§çº¿ç¨‹.</p><ul><li>kt-jvm å§‹ç»ˆæ˜¯ä¾æ‰˜ jvm è™šæ‹Ÿæœº,åº”è¯¥æ˜¯æ— æ³•çªç ´ jvm çš„é™åˆ¶(å¯èƒ½,å¤§æ¦‚,ä¹Ÿè®¸).kt-jvm åç¨‹çš„æœ¬è´¨å¯èƒ½è¿˜æ˜¯j ava çº¿ç¨‹çš„å‹å¥½å°è£…?(å­˜ç–‘).</li><li>å¦‚ä½•è§£å†³å¹¶å‘ä»»åŠ¡? æƒ³èµ·äº†è¢« java å›è°ƒåœ°ç‹±æ”¯é…çš„ææƒ§,åæ¥ rxjava é“¾å¼æ“ä½œè§£æ”¾äº†æˆ‘ä»¬. kt åç¨‹æ›´è¿›ä¸€æ­¥,æŒ‰ç…§å®˜æ–¹æ–‡æ¡£è¯´æ˜¯å¯ä»¥é€šè¿‡çœ‹ä¼¼åŒæ­¥çš„ä»£ç å®ç°éé˜»å¡å¼çš„å¼‚æ­¥ä»»åŠ¡,æŒºç»•çš„,ä½†æ˜¯å¥½ç”¨.</li></ul></li><li><p>æ·»åŠ åç¨‹æ”¯æŒ</p><ul><li><p>åœ¨ project çš„ build.gradle æ·»åŠ ä¸€ä¸ªç¯å¢ƒå˜é‡ <code>ext.kotlin_coroutines = '1.3.3'</code>(ç›®å‰æœ€æ–°ç‰ˆæœ¬æ˜¯ 1.3.3)</p></li><li><p>åœ¨ module çš„ build.gradle æ·»åŠ æ ¸å¿ƒåº“å’Œå¹³å°åº“(è¿™é‡Œæ˜¯ android)</p><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">implementation <span class="string">&quot;org.jetbrains.kotlinx:kotlinx-coroutines-core:<span class="variable">$kotlin_coroutines</span>&quot;</span></span><br><span class="line">implementation <span class="string">&quot;org.jetbrains.kotlinx:kotlinx-coroutines-android:<span class="variable">$kotlin_coroutines</span>&quot;</span></span><br></pre></td></tr></table></figure></li></ul></li><li><p>å¯åŠ¨åç¨‹</p><ul><li>runBlocking(){}: çº¿ç¨‹åˆ‡æ¢åˆ°åç¨‹,ä½†ä¼šé˜»å¡å½“å‰æ‰€åœ¨çš„çº¿ç¨‹,ä¸€èˆ¬ä»…åœ¨å•å…ƒæµ‹è¯•æ—¶ä½¿ç”¨.</li><li>GlobalScope.xx: ä¸ä¼šé˜»å¡çº¿ç¨‹,ä½† GlobalScope å¯åŠ¨çš„åç¨‹ä¸åº”ç”¨çš„ç”Ÿå‘½å‘¨æœŸä¸€è‡´,åŒæ ·ä¸æ¨è<ul><li>launch(){}: æœ€å¸¸ç”¨çš„å¯åŠ¨åç¨‹çš„æ–¹å¼,è¿”å›ä¸€ä¸ª Job ç±»å‹çš„å¯¹è±¡.</li><li>async/await(){}: å¯åŠ¨åç¨‹å¹¶è¿”å›æ‰§è¡Œçš„ç»“æœ,è¿”å›ä¸€ä¸ª Deferre å¯¹è±¡.</li></ul></li><li>è‡ªå®šä¹‰ CoroutineContext: æ¨è.ä¹‹åçš„æ–¹æ³•æœ‰ launch/async/await.æ­¤å¤„å°±ä¸å±•å¼€äº†,ç­‰å¾…åˆ·å®Œ jetpack å†è¡¥å…….</li></ul></li><li><p>åç¨‹çš„å¯åŠ¨æ–¹å¼.åœ¨å¯åŠ¨å‚æ•°çš„ç¬¬äºŒä¸ª start: CoroutineStart.</p><ul><li>DEFAULT: é»˜è®¤çš„å¯åŠ¨æ–¹å¼,å½“å‰çº¿ç¨‹ä»€ä¹ˆæ—¶å€™æœ‰ç©º,ä»€ä¹ˆæ—¶å€™å¯åŠ¨.</li><li>LAZY: æ²¡æœ‰æ‰‹åŠ¨è°ƒç”¨å¯åŠ¨æ—¶ä¸ä¼šå¯åŠ¨.ä¾‹å¦‚ Job ç±»å‹å¯¹è±¡å°±æ˜¯è°ƒç”¨ start æˆ– join æ–¹æ³•.</li><li>ATOMIC: åŸå­ç±»å‹? åªè¦å¯åŠ¨å°±åœä¸ä¸‹æ¥.(å•¥æ—¶å€™ç”¨?)</li><li>UNDISPATCHED: æœªå®šä¹‰.ç”¨äºè‡ªå®šä¹‰å¯åŠ¨å‚æ•°.</li><li>block: suspend CoroutineScope.() -&gt; Unit : è¦æ‰§è¡Œçš„é—­åŒ…,çœŸæ­£çš„åç¨‹å†…å®¹.</li></ul></li><li><p>åç¨‹å–æ¶ˆ(åŸºæœ¬æ˜¯ Job ç±»å‹çš„å¯¹è±¡)</p><ul><li><p>æœ€ç®€å•çš„æ˜¯ <code>.cancel()</code> å–æ¶ˆååç¨‹ä¸å†è¿”å›.<code>.join()</code>: ç­‰å¾…åç¨‹ç»“æŸ. æˆ–è€…ä½¿ç”¨ <code>.cancelAndJoin()</code> ç­‰ä»·äº <code>.cancel()</code> å’Œ <code>.join()</code> è¿ç”¨.</p><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> job = launch &#123;</span><br><span class="line">    repeat(<span class="number">1000</span>) &#123; i -&gt;</span><br><span class="line">        println(<span class="string">&quot;job: I&#x27;m sleeping <span class="variable">$i</span> ...&quot;</span>)</span><br><span class="line">        delay(<span class="number">500L</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">delay(<span class="number">1200L</span>) <span class="comment">// å»¶è¿Ÿä¸€æ®µæ—¶é—´</span></span><br><span class="line">job.cancel() <span class="comment">// å–æ¶ˆè¯¥ä½œä¸š</span></span><br><span class="line">job.join() <span class="comment">// ç­‰å¾…ä½œä¸šæ‰§è¡Œç»“æŸ</span></span><br><span class="line">println(<span class="string">&quot;main: over&quot;</span>)</span><br></pre></td></tr></table></figure></li><li><p>ä½†æ˜¯å¯¹äºæ‰§è¡Œè®¡ç®—ä»»åŠ¡çš„åç¨‹,<code>cancel()</code> ä»¥åè¿˜æ­£å¸¸è¾“å‡ºåˆ°ç»“æŸ. å¯¹äºè®¡ç®—ä»»åŠ¡çš„åç¨‹å–æ¶ˆéœ€è¦åœ¨åç¨‹å†…æ£€æŸ¥ isActive.(é€šçŸ¥åç¨‹è‡ªå°½)</p><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> startTime = System.currentTimeMillis()</span><br><span class="line"><span class="keyword">val</span> job = launch(Dispatchers.Default) &#123;</span><br><span class="line">    <span class="keyword">var</span> nextPrintTime = startTime</span><br><span class="line">    <span class="keyword">var</span> i = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> (i &lt; <span class="number">5</span>) &#123; <span class="comment">// ä¸€ä¸ªæ‰§è¡Œè®¡ç®—çš„å¾ªç¯ï¼Œåªæ˜¯ä¸ºäº†å ç”¨ CPU æ¯ç§’æ‰“å°æ¶ˆæ¯ä¸¤æ¬¡</span></span><br><span class="line">        <span class="keyword">if</span> (System.currentTimeMillis() &gt;= nextPrintTime) &#123;</span><br><span class="line">            println(<span class="string">&quot;å¾ªç¯: $&quot;</span>)</span><br><span class="line">            nextPrintTime += <span class="number">500L</span> &#125;&#125;&#125;</span><br><span class="line">delay(<span class="number">1300L</span>) <span class="comment">// ç­‰å¾…ä¸€æ®µæ—¶é—´</span></span><br><span class="line">job.cancelAndJoin() <span class="comment">// å–æ¶ˆä¸€ä¸ªä½œä¸šå¹¶ä¸”ç­‰å¾…å®ƒç»“æŸ</span></span><br><span class="line">println(<span class="string">&quot;main: Now I can quit.&quot;</span>)</span><br></pre></td></tr></table></figure></li><li><p>å–æ¶ˆåç¨‹æ—¶ä¼šæŠ›å‡º <code>CancellationException</code> å¼‚å¸¸,å› æ­¤å¯ä¸ try-finally è¿ç”¨,åœ¨ç»“æŸåç¨‹æ—¶é‡Šæ”¾æŸäº›èµ„æº.åœ¨ finally ä»£ç å—ä¸­,å¦‚æœå¿…é¡»è°ƒç”¨é˜»å¡å¼çš„ä»£ç ,å¯ä»¥ä½¿ç”¨ <code>withContext(NonCancellable) &#123;â€¦â€¦&#125;</code> åŒ…è£….</p><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">    <span class="keyword">val</span> job = launch &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        repeat(<span class="number">1000</span>) &#123; i -&gt;</span><br><span class="line">            println(<span class="string">&quot;job: I&#x27;m sleeping <span class="variable">$i</span> ...&quot;</span>)</span><br><span class="line">            delay(<span class="number">500L</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        withContext(NonCancellable) &#123;</span><br><span class="line">            println(<span class="string">&quot;job: I&#x27;m running finally&quot;</span>)</span><br><span class="line">            delay(<span class="number">1000L</span>)</span><br><span class="line">            println(<span class="string">&quot;job: And I&#x27;ve just delayed for 1 sec because I&#x27;m non-cancellable&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">delay(<span class="number">1300L</span>) <span class="comment">// å»¶è¿Ÿä¸€æ®µæ—¶é—´</span></span><br><span class="line">println(<span class="string">&quot;main: I&#x27;m tired of waiting!&quot;</span>)</span><br><span class="line">job.cancelAndJoin() <span class="comment">// å–æ¶ˆè¯¥ä½œä¸šå¹¶ç­‰å¾…å®ƒç»“æŸ</span></span><br><span class="line">println(<span class="string">&quot;main: Now I can quit.&quot;</span>)</span><br></pre></td></tr></table></figure></li><li><p>è¿˜æœ‰ä¸€ç§æƒ…å†µæ˜¯åç¨‹è¿è¡Œè¶…æ—¶,ä¾‹å¦‚ç½‘ç»œè¯·æ±‚æœ‰æœ‰ä¸€ä¸ªæœ€é•¿è¶…æ—¶æ—¶é—´.å¯ä»¥åˆ©ç”¨ withTimeout() å®ç°åç¨‹è¶…æ—¶è‡ªæ€.è‡ªæ€åä¼šæŠ›å‡º TimeoutCancellationException å¼‚å¸¸.é€šè¿‡ try-finally è¿›è¡Œä¸€äº›å…³é—­èµ„æºçš„å·¥ä½œ.å¦‚æœä¸éœ€è¦è¿™ä¸ªå¤„ç†,å¯ä»¥é‡‡ç”¨ withTimeoutOrNull() é¿å…æŠ›å‡ºå¼‚å¸¸.ä¸¤è€…åŠŸèƒ½ç›¸åŒ.</p><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> result = withTimeoutOrNull(<span class="number">1300L</span>) &#123;</span><br><span class="line">    repeat(<span class="number">1000</span>) &#123; i -&gt;</span><br><span class="line">        println(<span class="string">&quot;I&#x27;m sleeping <span class="variable">$i</span> ...&quot;</span>)</span><br><span class="line">        delay(<span class="number">500L</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="string">&quot;Done&quot;</span> <span class="comment">// åœ¨å®ƒè¿è¡Œå¾—åˆ°ç»“æœä¹‹å‰å–æ¶ˆå®ƒ</span></span><br><span class="line">&#125;</span><br><span class="line">println(<span class="string">&quot;Result is <span class="variable">$result</span>&quot;</span>)</span><br></pre></td></tr></table></figure></li></ul></li><li><p>async å®ç°å¹¶å‘</p><ul><li><p>å‡è®¾æœ‰è¿™æ ·ä¸¤ä¸ªå‡½æ•°</p><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">suspend</span> <span class="function"><span class="keyword">fun</span> <span class="title">One</span><span class="params">()</span></span>: <span class="built_in">Int</span> &#123;</span><br><span class="line">    delay(<span class="number">1000L</span>) <span class="comment">// å‡è®¾æˆ‘ä»¬åœ¨è¿™é‡Œåšäº†ä¸€äº›æœ‰ç”¨çš„äº‹</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">13</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">suspend</span> <span class="function"><span class="keyword">fun</span> <span class="title">Two</span><span class="params">()</span></span>: <span class="built_in">Int</span> &#123;</span><br><span class="line">    delay(<span class="number">1000L</span>) <span class="comment">// å‡è®¾æˆ‘ä»¬åœ¨è¿™é‡Œä¹Ÿåšäº†ä¸€äº›æœ‰ç”¨çš„äº‹</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">29</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>è®¡ç®—ä¸¤è€…çš„å’Œ <code>val tmp = One()+Two()</code>.è¿™æ ·ä»£ç æ˜¯ä¸²è¡Œæ‰§è¡Œ,æ€»å…±è¦ 2s.æœ‰äº†åç¨‹å,æˆ‘ä»¬èƒ½ä¸èƒ½æŠŠä¸¤ä¸ªå‡½æ•°æ‰”åˆ°ä¸¤ä¸ªåç¨‹é‡Œé¢,åŒæ—¶å¼€å§‹æ‰§è¡Œ?è¿™æ ·å¯ä»¥èŠ‚çœä¸€åŠçš„æ—¶é—´.</p></li><li><p>è‚¯å®šæ˜¯å¯ä»¥çš„,é€šè¿‡åç¨‹çš„ async åŒ…è£…,await è·å–ç»“æœå°±èƒ½å®ç°å¹¶è¡Œ.æœ€åè¾“å‡ºè¿è¡Œæ—¶é—´æ˜¯ 1035 ms.</p><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> time = measureTimeMillis &#123;</span><br><span class="line">    <span class="keyword">val</span> one = async &#123; One() &#125;</span><br><span class="line">    <span class="keyword">val</span> two = async &#123; Two() &#125;</span><br><span class="line">    println(<span class="string">&quot;The answer is <span class="subst">$&#123;one.await() + two.await()&#125;</span>&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line">println(<span class="string">&quot;Completed in <span class="variable">$time</span> ms&quot;</span>)</span><br></pre></td></tr></table></figure></li><li><p>ä½†æ˜¯è¿™æ ·éå¸¸ä¸æ–¹ä¾¿å¼‚å¸¸å¤„ç†.å‡è®¾ val one = async { One() } è¿™ä¸€è¡Œå› ä¸º One() å†…éƒ¨çš„ bug è€ŒæŠ›å‡ºå¼‚å¸¸.æ­£å¸¸æƒ…å†µä¸‹ç¨‹åºåº”å½“åœæ­¢åˆ›å»ºå’Œå¯åŠ¨ one è¿™ä¸ªåç¨‹,å¹¶æŠ›å‡ºå¼‚å¸¸çš„ä¿¡æ¯ç»™å¼€å‘è€…,ä¹‹åå°±è·³è¿‡è¿™ä¸ªä»£ç å—æ‰§è¡Œå…¶ä»–å†…å®¹.ä½†æ˜¯å°±è¿™é‡Œçš„ä»£ç è€Œè¨€,ç¨‹åºè¿˜æ˜¯ä¼šç»§ç»­å‘ä¸‹æ‰§è¡Œå¹¶åˆ›å»ºå’Œå¯åŠ¨ one è¿™ä¸ªåç¨‹,è™½ç„¶æœ€ç»ˆç»“æœéƒ½æ˜¯æŠ›å‡ºå¼‚å¸¸ç»ˆæ­¢äº†ä»£ç å—çš„æ‰§è¡Œ.</p></li><li><p>æ­£ç¡®çš„é£æ ¼: ä½¿ç”¨ coroutineScope å°†åç¨‹æ‰§è¡Œéƒ¨åˆ†åŒ…è£…æˆä¸€ä¸ªå¼‚æ­¥å‡½æ•°,å½“ä»£ç å—é‡åˆ°å¼‚å¸¸æ—¶ä¼šç›´æ¥ç»ˆæ­¢,æŠ›å‡ºå¼‚å¸¸.ä¸»å‡½æ•°è°ƒç”¨ä¾ç„¶æ˜¯å¹¶è¡Œæ‰§è¡Œ.</p><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">suspend</span> <span class="function"><span class="keyword">fun</span> <span class="title">concurrentSum</span><span class="params">()</span></span>: <span class="built_in">Int</span> = coroutineScope &#123;</span><br><span class="line">    <span class="keyword">val</span> one = async &#123; One() &#125;</span><br><span class="line">    <span class="keyword">val</span> two = async &#123; Two() &#125;</span><br><span class="line">    one.await() + two.await()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>åç¨‹ä¸Šä¸‹æ–‡ä¸è°ƒåº¦å™¨</p><ul><li><p>ä¸Šä¸‹æ–‡æ˜¯ Job ç±»å‹å¯¹è±¡å¯åŠ¨å‚æ•°çš„ç¬¬ä¸€ä¸ª,ç”¨åœ¨åç¨‹ç›´æ¥åˆ‡æ¢ä¼ é€’å‚æ•°,å°±æ˜¯åç¨‹çš„è°ƒåº¦å™¨.å†³å®šåç¨‹è¿è¡Œåœ¨é‚£ä¸ªçº¿ç¨‹.</p></li><li><p>è°ƒåº¦å™¨</p><ul><li><p>Dispatchers.Default: é»˜è®¤è°ƒåº¦,ä½¿ç”¨ jvm çš„å…±äº«çº¿ç¨‹æ± ,é€‚åˆ cpu å¯†é›†å‹.</p></li><li><p>Dispatchers.Main: è¿è¡Œåœ¨ä¸»çº¿ç¨‹,Android æ›´æ–° UI ç­‰.</p></li><li><p><span class="exturl" data-url="aHR0cDovL0Rpc3BhdGNoZXJzLklP">Dispatchers.IO<i class="fa fa-external-link-alt"></i></span>: é€‚åˆ IO å¯†é›†å‹.</p></li><li><p>newSingleThreadContext(â€œxxxâ€): å¼€å¯ä¸€ä¸ªæ–°çº¿ç¨‹æ¥æ‰§è¡Œåç¨‹,è¿™æ ·ä»£ä»·å¾ˆé«˜,ä¸€èˆ¬ä¼šå¤ç”¨çº¿ç¨‹ä»¥èŠ‚çœèµ„æº.å½“åç¨‹å’Œçº¿ç¨‹ä¸å†éœ€è¦æ—¶å¿…é¡»å…³é—­.</p></li><li><p>Dispatchers.Unconfined: è¿™ä¸ªç‰¹æ®Šä¸€ç‚¹,æ˜¯éå—é™è°ƒåº¦å™¨.å®ƒä»…ä»…è¿è¡Œåˆ°åç¨‹ä»£ç å—ä¸­ç¬¬ä¸€æ¬¡æŒ‚èµ·çš„åœ°æ–¹.ä¹‹ååç¨‹åœ¨é‚£ä¸ªçº¿ç¨‹æ¢å¤å®Œå…¨ç”±è¢«è°ƒç”¨çš„æŒ‚èµ·å‡½æ•°æ¥å†³å®š,å³ä¸é™åˆ¶æ¢å¤çš„çº¿ç¨‹.ç¨‹åºç¬¬äºŒæ¬¡ä¼šè¾“å‡ºè¿è¡Œåœ¨ delay() çš„ DefaultExecutor çš„çº¿ç¨‹ä¸Š.</p><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">launch(Dispatchers.Unconfined) &#123; <span class="comment">// éå—é™çš„â€”â€”å°†å’Œä¸»çº¿ç¨‹ä¸€èµ·å·¥ä½œ</span></span><br><span class="line">    println(<span class="string">&quot;Unconfined      : I&#x27;m working in thread <span class="subst">$&#123;Thread.currentThread().name&#125;</span>&quot;</span>)</span><br><span class="line">    delay(<span class="number">500</span>)</span><br><span class="line">    println(<span class="string">&quot;Unconfined      : After delay in thread <span class="subst">$&#123;Thread.currentThread().name&#125;</span>&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>å­åç¨‹</p><ul><li>å½“ä¸€ä¸ªåç¨‹è¢«å…¶å®ƒåç¨‹åœ¨ CoroutineScope ä¸­å¯åŠ¨çš„æ—¶,æ–°åç¨‹å°†é€šè¿‡ CoroutineScope.coroutineContext æ¥ç»§æ‰¿ä¸Šä¸‹æ–‡,å¹¶ä¸”è¿™ä¸ªæ–°åç¨‹çš„ Job å°†ä¼šæˆä¸ºçˆ¶åç¨‹çš„å­åç¨‹.å½“çˆ¶åç¨‹è¢«å–æ¶ˆæ—¶,å…¶æ‰€æœ‰å­åç¨‹ä¹Ÿä¼šè¢«é€’å½’çš„å–æ¶ˆ.</li><li>å½“ä½¿ç”¨ GlobalScope å¯åŠ¨æ˜¯ä¸ªç‰¹ä¾‹,è¿™é‡Œæ–°åç¨‹æ²¡æœ‰çˆ¶åç¨‹.å› æ­¤å®ƒä¸è¿™ä¸ªå¯åŠ¨çš„ä½œç”¨åŸŸæ— å…³ä¸”ç‹¬ç«‹è¿ä½œ.</li></ul></li><li><p>åç¨‹ä½œç”¨åŸŸ</p><ul><li><p>ä¸Šæ–‡æåˆ°ä½¿ç”¨ GlobalScope å¯åŠ¨çš„åç¨‹ç”Ÿå‘½å‘¨æœŸå’Œæ•´ä¸ªåº”ç”¨çš„ç”Ÿå‘½å‘¨æœŸä¸€è‡´.è€Œåœ¨å…·ä½“çš„ Android åº”ç”¨ä¸­åç¨‹ç›´è§‚ä¸Šåº”è¯¥æ˜¯å’Œä½¿ç”¨å®ƒçš„ç»„ä»¶ç”Ÿå‘½å‘¨æœŸä¸€è‡´.å› æ­¤ç›´æ¥ä½¿ç”¨ GlobalScope å¹¶ä¸æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„åç¨‹å¯åŠ¨æ–¹å¼.è€Œä¸”å¿…é¡»è€ƒè™‘åœ¨åº”ç”¨é€€å‡ºå‡½æ•°ä¸­å–æ¶ˆæ‰æ‰€æœ‰åç¨‹,è€Œä»¥ GlobalScope å¯åŠ¨çš„åç¨‹å¿…é¡»ä¸€ä¸ªä¸€ä¸ªå–æ¶ˆ,åç¨‹æ•°é‡ä¸€æ—¦ä¸Šå»äº†,éå¸¸éº»çƒ¦.</p></li><li><p>æœ€å¥½æ˜¯è‡ªè¡Œåˆ›å»ºä¸€ä¸ª CoroutineScope æ¥ç®¡ç†åç¨‹çš„ç”Ÿå‘½å‘¨æœŸ.</p><ul><li><p>å®ç° CoroutineScope() æ¥å£: ä½¿ç”¨å§”æ‰˜æ¨¡å¼åŒæ—¶æŒ‡å®šè°ƒåº¦å™¨</p><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MainActivity</span> : <span class="type">AppCompatActivity</span>() ,  CoroutineScope <span class="keyword">by</span> CoroutineScope(Dispatchers.Default)&#123;</span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">destroy</span><span class="params">()</span></span> &#123;</span><br><span class="line">      cancel() <span class="comment">// activity é€€å‡ºæ—¶</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>MainScope() æ–¹æ³•:</p><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MainActivity</span> : <span class="type">AppCompatActivity</span>() &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">val</span> mainScope = MainScope()</span><br><span class="line">  <span class="function"><span class="keyword">fun</span> <span class="title">destroy</span><span class="params">()</span></span> &#123;</span><br><span class="line">    mainScope.cancel()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li></ul></li></ul></li><li><p>ç®¡é“ channel</p><ul><li><p>kt çš„ channel ä¸“é—¨ç”¨äºåç¨‹ä¹‹é—´é€šä¿¡.æœ€ç®€å•çš„å£°æ˜ä¸€ä¸ª channel ç±»å‹å˜é‡,ä¸€ä¸ªåç¨‹ send ä¸€ä¸ªåç¨‹ receive .</p></li><li><p>channel è¿˜å¯ä»¥ä½¿ç”¨ for å¾ªç¯éå†.ä½†æ‰€æœ‰å…ƒç´ å‡ send å®Œæ¯•,è°ƒç”¨ close å…³é—­.</p></li><li><p>channel æ˜¯ä¸€ä¸ªå…¸å‹çš„ç”Ÿäº§è€…/æ¶ˆè´¹è€…æ¨¡å¼,é€šå¸¸ä½¿ç”¨ produce æ¥æ„å»º channel çš„ç”Ÿäº§è€…åç¨‹,è¿”å›ä¸€ä¸ª ReceiveChannel&lt;&gt; ç±»å‹.</p><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">Test</span><span class="params">()</span></span> = GlobalScope.produce &#123;</span><br><span class="line">    <span class="keyword">for</span> (x <span class="keyword">in</span> <span class="number">1.</span><span class="number">.5</span>) send(x * x)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> = runBlocking&lt;<span class="built_in">Unit</span>&gt; &#123;</span><br><span class="line">    <span class="keyword">val</span> test = Test()</span><br><span class="line">    <span class="keyword">for</span> (y <span class="keyword">in</span> test) println(y)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>é…åˆåç¨‹ channel å¯ä»¥äº§ç”Ÿç±»ä¼¼æµä¸€æ ·æ•ˆæœ.ç”Ÿäº§,è¿‡æ»¤,æ¶ˆè´¹.</p></li><li><p>channel å¯ä»¥æ˜¯ä¸€å¯¹å¤š,å¤šå¯¹å¤š,å¤šå¯¹ä¸€.æ•ˆæœä¸€è‡´,å…ˆè¿›å…ˆå‡ºçš„é˜Ÿåˆ—.</p></li><li><p>channel å¯ä»¥æŒ‡å®šç¼“å­˜æ±  <code>Channel&lt;&gt;(5)</code>,åœ¨ produce ä¸­é€šè¿‡ capacity å‚æ•°æŒ‡å®š <code>GlobalScope.produce(capacity = 5) &#123;&#125;</code>.å½“ç¼“å­˜æ± æ»¡æ—¶,send åç¨‹ä¼šæš‚æ—¶æŒ‚èµ·,ç›´åˆ°ç¼“å­˜æ± æœ‰ç©ºä½™.ç¼“å­˜æ± ä¸ºç©º,receive åç¨‹ä¼šæŒ‚èµ·,ç›´åˆ°ç¼“å­˜æ± æœ‰å…ƒç´ .</p></li></ul></li></ul></div><footer class="post-footer"><template id="not-by-ai-badge-template"><li class="post-copyright-not-by-ai"><strong>Not By AI:</strong> <a class="not-by-ai-badge-link" href="https://notbyai.fyi/tw/" target="_blank" rel="noopener noreferrer" title="Not By AI"><img class="not-by-ai-badge not-by-ai-badge--light" src="/images/not-by-ai-written-black-tw.svg" alt="Written By Human, Not By AI"> <img class="not-by-ai-badge not-by-ai-badge--dark" src="/images/not-by-ai-written-white-tw.svg" alt="Written By Human, Not By AI"></a></li></template><div class="post-copyright"><ul><li class="post-copyright-author"><strong>æœ¬æ–‡ä½œè€…ï¼š </strong>Jasper</li><li class="post-copyright-link"><strong>æœ¬æ–‡é“¾æ¥ï¼š</strong> <a href="https://jasper1024.com/jasper/f93ae632/" title="kotlin åŸºç¡€é€Ÿæ">https://jasper1024.com/jasper/f93ae632/</a></li><li class="post-copyright-license"><strong>ç‰ˆæƒå£°æ˜ï¼š </strong>æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC8="><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</span> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼</li></ul></div><div class="post-tags"><a href="/tags/kotlin/" rel="tag"># kotlin</a></div><div class="post-nav"><div class="post-nav-item"><a href="/jasper/f142c955/" rel="prev" title="iptables é€Ÿæ"><i class="fa fa-angle-left"></i> iptables é€Ÿæ</a></div><div class="post-nav-item"><a href="/jasper/f93ae635/" rel="next" title="miwifi_mini 5Gä¸­ç»§">miwifi_mini 5Gä¸­ç»§ <i class="fa fa-angle-right"></i></a></div></div></footer></article></div><div class="tabs tabs-comment"><ul class="nav-tabs"><li class="tab"><a href="#comment-utterances">utterances</a></li><li class="tab"><a href="#comment-disqus">disqus</a></li></ul><div class="tab-content"><div class="tab-pane utterances" id="comment-utterances"><div class="comments utterances-container"></div></div><div class="tab-pane disqus" id="comment-disqus"><div class="comments" id="disqus_thread"><noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript></div></div></div></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; 2016 â€“ <span itemprop="copyrightYear">2026</span> <span class="with-love"><i class="fa fa-user"></i> </span><span class="author" itemprop="copyrightHolder">JasperHale</span></div><div class="wordcount"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-chart-line"></i> </span><span>ç«™ç‚¹æ€»å­—æ•°ï¼š</span> <span title="ç«™ç‚¹æ€»å­—æ•°">1.2m</span> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-coffee"></i> </span><span>ç«™ç‚¹é˜…è¯»æ—¶é•¿ &asymp;</span> <span title="ç«™ç‚¹é˜…è¯»æ—¶é•¿">18:54</span></span></div><div class="powered-by">ç”± <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & <span class="exturl" data-url="aHR0cHM6Ly90aGVtZS1uZXh0LmpzLm9yZy9waXNjZXMv">NexT.Pisces</span> å¼ºåŠ›é©±åŠ¨</div></div></footer><div class="toggle sidebar-toggle" role="button"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div><div class="sidebar-dimmer"></div><div class="reading-progress-bar"></div><span class="exturl github-corner" data-url="aHR0cHM6Ly9naXRodWIuY29tL0phc3Blci0xMDI0" title="åœ¨ GitHub ä¸Šå…³æ³¨æˆ‘" aria-label="åœ¨ GitHub ä¸Šå…³æ³¨æˆ‘"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></span><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><script class="next-config" data-name="disqus" type="application/json">{"enable":true,"shortname":"jasper1024","count":true,"i18n":{"disqus":"disqus"}}</script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.27.0/source/js/third-party/comments/disqus.min.js" defer></script><script class="next-config" data-name="utterances" type="application/json">{"enable":true,"repo":"Jasper-1024/blog_discuss","issue_term":"pathname","theme":"github-dark"}</script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.27.0/source/js/third-party/comments/utterances.min.js" defer></script><script>!function(){function e(){var e,t=document.getElementById("not-by-ai-badge-template");t&&t.content&&((e=document.querySelector(".post-copyright ul"))&&(e.querySelector(".post-copyright-not-by-ai")||e.appendChild(t.content.cloneNode(!0))))}e(),document.addEventListener("pjax:complete",e)}()</script><div class="moon-menu"><div class="moon-menu-items"><div id="moon-menu-item-back2bottom" class="moon-menu-item"><i class="fas fa-chevron-down"></i></div><div id="moon-menu-item-back2top" class="moon-menu-item"><i class="fas fa-chevron-up"></i></div></div><div class="moon-menu-button"><svg class="moon-menu-bg"><circle class="moon-menu-cricle" cx="50%" cy="50%" r="44%"></circle><circle class="moon-menu-border" cx="50%" cy="50%" r="48%"></circle></svg><div class="moon-menu-content"><div class="moon-menu-icon"><i class="fas fa-ellipsis-v"></i></div><div class="moon-menu-text"></div></div></div></div><script src="/js/injector.js"></script></body></html>